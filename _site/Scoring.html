<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Peanut Tutorial - Scoring Individual Students</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Peanut Tutorial</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./ECD.html">
 <span class="menu-text">ECD Intro</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./BayesNets.html">
 <span class="menu-text">Bayesian Networks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./Scoring.html" aria-current="page">
 <span class="menu-text">Scoring</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Building.html">
 <span class="menu-text">Building Nets</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Updating.html">
 <span class="menu-text">Calibration</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Visualization.html">
 <span class="menu-text">Model checking and visualzation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Dynamic.html">
 <span class="menu-text">Dynamic Models</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Resources.html">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./References.html">
 <span class="menu-text">References</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/PeanutLogo.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Peanut Logo</figcaption><p></p>
</figure>
</div>
</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#rnetica-and-peanut-packages" id="toc-rnetica-and-peanut-packages" class="nav-link active" data-scroll-target="#rnetica-and-peanut-packages">RNetica and Peanut Packages</a>
  <ul class="collapse">
  <li><a href="#the-rnetica-packages" id="toc-the-rnetica-packages" class="nav-link" data-scroll-target="#the-rnetica-packages">The RNetica Packages</a></li>
  <li><a href="#peanut-packages" id="toc-peanut-packages" class="nav-link" data-scroll-target="#peanut-packages">Peanut packages</a></li>
  <li><a href="#peanut-packages-1" id="toc-peanut-packages-1" class="nav-link" data-scroll-target="#peanut-packages-1">Peanut packages</a></li>
  <li><a href="#license" id="toc-license" class="nav-link" data-scroll-target="#license">License</a></li>
  <li><a href="#installing-the-license-key" id="toc-installing-the-license-key" class="nav-link" data-scroll-target="#installing-the-license-key">Installing the License Key</a></li>
  <li><a href="#starting-rnetica" id="toc-starting-rnetica" class="nav-link" data-scroll-target="#starting-rnetica">Starting RNetica</a></li>
  <li><a href="#when-to-use-the-session-object." id="toc-when-to-use-the-session-object." class="nav-link" data-scroll-target="#when-to-use-the-session-object.">When to use the session object.</a></li>
  <li><a href="#the-r-heap-and-the-netica-heap" id="toc-the-r-heap-and-the-netica-heap" class="nav-link" data-scroll-target="#the-r-heap-and-the-netica-heap">The R heap and the Netica heap</a></li>
  <li><a href="#active-and-inactive-pointers" id="toc-active-and-inactive-pointers" class="nav-link" data-scroll-target="#active-and-inactive-pointers">Active and Inactive pointers</a></li>
  </ul></li>
  <li><a href="#mini-aced" id="toc-mini-aced" class="nav-link" data-scroll-target="#mini-aced">Mini-ACED</a>
  <ul class="collapse">
  <li><a href="#mini-aced-proficiency-model" id="toc-mini-aced-proficiency-model" class="nav-link" data-scroll-target="#mini-aced-proficiency-model">Mini-ACED Proficiency model</a></li>
  <li><a href="#mini-aced-em-fragments" id="toc-mini-aced-em-fragments" class="nav-link" data-scroll-target="#mini-aced-em-fragments">Mini-ACED EM Fragments</a></li>
  </ul></li>
  <li><a href="#scoring-script" id="toc-scoring-script" class="nav-link" data-scroll-target="#scoring-script">Scoring Script</a>
  <ul class="collapse">
  <li><a href="#preliminaries" id="toc-preliminaries" class="nav-link" data-scroll-target="#preliminaries">Preliminaries</a></li>
  <li><a href="#task-to-em-map" id="toc-task-to-em-map" class="nav-link" data-scroll-target="#task-to-em-map">Task to EM map</a></li>
  <li><a href="#read-in-the-network." id="toc-read-in-the-network." class="nav-link" data-scroll-target="#read-in-the-network.">Read in the Network.</a></li>
  <li><a href="#aside-1-node-sets" id="toc-aside-1-node-sets" class="nav-link" data-scroll-target="#aside-1-node-sets">Aside 1 – Node Sets</a></li>
  <li><a href="#node-set-examples" id="toc-node-set-examples" class="nav-link" data-scroll-target="#node-set-examples">Node Set Examples</a></li>
  <li><a href="#more-node-set-examples" id="toc-more-node-set-examples" class="nav-link" data-scroll-target="#more-node-set-examples">More Node Set Examples</a></li>
  <li><a href="#aside-2-common-net-operations" id="toc-aside-2-common-net-operations" class="nav-link" data-scroll-target="#aside-2-common-net-operations">Aside 2: Common Net operations</a></li>
  <li><a href="#more-rnetica-queries" id="toc-more-rnetica-queries" class="nav-link" data-scroll-target="#more-rnetica-queries">More RNetica Queries</a></li>
  <li><a href="#conditional-probability-tables-as-data-frame" id="toc-conditional-probability-tables-as-data-frame" class="nav-link" data-scroll-target="#conditional-probability-tables-as-data-frame">Conditional Probability Tables (as Data Frame)</a></li>
  <li><a href="#inference" id="toc-inference" class="nav-link" data-scroll-target="#inference">Inference</a></li>
  <li><a href="#beliefs-marginal-probabilities" id="toc-beliefs-marginal-probabilities" class="nav-link" data-scroll-target="#beliefs-marginal-probabilities">Beliefs (Marginal Probabilities)</a></li>
  <li><a href="#example-enter-evidence" id="toc-example-enter-evidence" class="nav-link" data-scroll-target="#example-enter-evidence">Example: Enter Evidence</a></li>
  <li><a href="#example-retract-evidence" id="toc-example-retract-evidence" class="nav-link" data-scroll-target="#example-retract-evidence">Example: Retract Evidence</a></li>
  <li><a href="#back-to-work" id="toc-back-to-work" class="nav-link" data-scroll-target="#back-to-work">Back to work</a></li>
  <li><a href="#setup-score-history." id="toc-setup-score-history." class="nav-link" data-scroll-target="#setup-score-history.">Setup score history.</a></li>
  <li><a href="#fred-does-a-task" id="toc-fred-does-a-task" class="nav-link" data-scroll-target="#fred-does-a-task">Fred does a task</a></li>
  <li><a href="#absorb-evidence" id="toc-absorb-evidence" class="nav-link" data-scroll-target="#absorb-evidence">Absorb Evidence</a></li>
  <li><a href="#cleanup" id="toc-cleanup" class="nav-link" data-scroll-target="#cleanup">Cleanup</a></li>
  <li><a href="#nd-task" id="toc-nd-task" class="nav-link" data-scroll-target="#nd-task">2nd Task</a></li>
  <li><a href="#answer-for-2nd-task" id="toc-answer-for-2nd-task" class="nav-link" data-scroll-target="#answer-for-2nd-task">Answer for 2nd Task</a></li>
  <li><a href="#fred-does-another-task" id="toc-fred-does-another-task" class="nav-link" data-scroll-target="#fred-does-another-task">Fred does another task</a></li>
  <li><a href="#task-2-continued" id="toc-task-2-continued" class="nav-link" data-scroll-target="#task-2-continued">Task 2 continued</a></li>
  <li><a href="#fred-logs-out" id="toc-fred-logs-out" class="nav-link" data-scroll-target="#fred-logs-out">Fred logs out</a></li>
  </ul></li>
  <li><a href="#score-an-entire-set-of-cases." id="toc-score-an-entire-set-of-cases." class="nav-link" data-scroll-target="#score-an-entire-set-of-cases.">Score an entire set of cases.</a>
  <ul class="collapse">
  <li><a href="#read-in-the-scores." id="toc-read-in-the-scores." class="nav-link" data-scroll-target="#read-in-the-scores.">Read in the scores.</a></li>
  <li><a href="#setup-for-student-in-sample" id="toc-setup-for-student-in-sample" class="nav-link" data-scroll-target="#setup-for-student-in-sample">Setup for student in sample</a></li>
  <li><a href="#now-loop-over-tasks" id="toc-now-loop-over-tasks" class="nav-link" data-scroll-target="#now-loop-over-tasks">Now loop over tasks</a></li>
  <li><a href="#now-look-at-the-scoring-history." id="toc-now-look-at-the-scoring-history." class="nav-link" data-scroll-target="#now-look-at-the-scoring-history.">Now look at the scoring history.</a></li>
  </ul></li>
  <li><a href="#weight-of-evidence" id="toc-weight-of-evidence" class="nav-link" data-scroll-target="#weight-of-evidence">Weight of Evidence</a>
  <ul class="collapse">
  <li><a href="#weight-of-evidence-1" id="toc-weight-of-evidence-1" class="nav-link" data-scroll-target="#weight-of-evidence-1">Weight of Evidence</a></li>
  <li><a href="#conditional-weight-of-evidence" id="toc-conditional-weight-of-evidence" class="nav-link" data-scroll-target="#conditional-weight-of-evidence">Conditional Weight of Evidence</a></li>
  <li><a href="#now-examine-scoring-history" id="toc-now-examine-scoring-history" class="nav-link" data-scroll-target="#now-examine-scoring-history">Now examine scoring history</a></li>
  <li><a href="#for-more-information" id="toc-for-more-information" class="nav-link" data-scroll-target="#for-more-information">For More information</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Scoring Individual Students</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="rnetica-and-peanut-packages" class="level1">
<h1>RNetica and Peanut Packages</h1>
<section id="the-rnetica-packages" class="level2">
<h2 class="anchored" data-anchor-id="the-rnetica-packages">The RNetica Packages</h2>
<p>The RNetica suite consists of a number of packages:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="PnetPackages.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">RNetica Package Suite</figcaption><p></p>
</figure>
</div>
<ol type="1">
<li><p><code>CPTtools</code> is a collection of tools for building conditional probability tables (particularly, the DiBello models). It stands alone.</p></li>
<li><p><code>RNetica</code> links R to the <a href="https://norsys.com">Netica</a> Bayes net engine. _Note: non-trivial uses of RNetica require a Netica API (not GUI) license from <a href="https://norsys.com">Norsys</a>.</p></li>
</ol>
</section>
<section id="peanut-packages" class="level2">
<h2 class="anchored" data-anchor-id="peanut-packages">Peanut packages</h2>
<p>The Peanut object oriented framework rests on top of <code>CPTtools</code> and <code>RNetica</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/PnetPackages.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">RNetica Package Suite</figcaption><p></p>
</figure>
</div>
<ol type="1">
<li><p><code>CPTtools</code> is a collection of tools for building conditional probability tables (particularly, the DiBello models). It stands alone.</p></li>
<li><p><code>RNetica</code> links R to the <a href="https://norsys.com">Netica</a> Bayes net engine. _Note: non-trivial uses of RNetica require a Netica API (not GUI) license from <a href="https://norsys.com">Norsys</a>.</p></li>
</ol>
</section>
<section id="peanut-packages-1" class="level2">
<h2 class="anchored" data-anchor-id="peanut-packages-1">Peanut packages</h2>
<p>The Peanut object oriented framework rests on top of <code>CPTtools</code> and <code>RNetica</code>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/PnetPackages.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">RNetica Package Suite</figcaption><p></p>
</figure>
</div>
<ol start="3" type="1">
<li><p><code>Peanut</code> (a corrupt reading of Pnet, or parameterized network) is an object oriented frame work on top of <code>CPTtools</code>.</p></li>
<li><p><code>PNetica</code> is an implementation of the <code>Peanut</code> framework using <code>RNetica</code>.</p></li>
</ol>
<p>Packages can be installed through R-Universe</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">'CPTtootls'</span>,<span class="st">'RNetica'</span>,<span class="st">'Peanut'</span>,<span class="st">'PNetica'</span>),</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">repos =</span> <span class="fu">c</span>(<span class="st">'https://ralmond.r-universe.dev'</span>, <span class="st">'https://cloud.r-project.org'</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Source code is on github <a href="https://github.com/ralmond/" class="uri">https://github.com/ralmond/</a>.</p>
</section>
<section id="license" class="level2">
<h2 class="anchored" data-anchor-id="license">License</h2>
<ul>
<li>R – GPL-3 (Free and open source)</li>
<li>RNetica – Artistic (Free and open source)</li>
<li>Netica.dll/libNetica.so– Commercial (open API, but not open source)
<ul>
<li>Free Student/Demo version
<ul>
<li>Limited number of nodes</li>
<li>Limited usage (education, evaluation of Netica)</li>
</ul></li>
<li>Paid version (see<a href="http://www.norsys.com/">http://www.norsys.com/</a>for price information)
<ul>
<li>Need to purchase API not GUI version ofNetica</li>
<li>May want both (use GUI to visualize networks built in RNetica)</li>
</ul></li>
</ul></li>
<li>CPTtools, Peanut – Artistic (Free and open source), does not depend on Netica</li>
<li>RNetica – Artistic, but depends on RNetica.</li>
</ul>
</section>
<section id="installing-the-license-key" class="level2">
<h2 class="anchored" data-anchor-id="installing-the-license-key">Installing the License Key</h2>
<ul>
<li><p>When you purchase a license, Norsys will send you a license key. Something that looks like:</p>
<p>“+User/Organization/120,310-details/XXXXX”</p>
<p>(Where I’ve obscured the last 5 security digits) 120 – GUI, 310 – API (I think)</p></li>
</ul>
<p>Three ways of installing the license key:</p>
<ol type="1">
<li><p>Use as argument to <code>NeticaSession(...,LicenseKey=XXX)</code></p></li>
<li><p>Set <code>options(NeticaLicenseKey=XXX)</code></p></li>
</ol>
<ul>
<li>This can be set in <code>.Rprofile</code> in your home directory.</li>
</ul>
<ol start="3" type="1">
<li>Set an environmental variable <code>NeticaLicenseKey</code> before launching R.</li>
</ol>
<ul>
<li>This can be set in <code>.Renviron</code> in your home directory.</li>
</ul>
</section>
<section id="starting-rnetica" class="level2">
<h2 class="anchored" data-anchor-id="starting-rnetica">Starting RNetica</h2>
<p>After you load RNetica you need to start the session. This is when you pass the license key.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RNetica)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>sess <span class="ot">&lt;-</span> <span class="fu">NeticaSession</span>(<span class="at">LicenseKey=</span>NeticaLicenseKey)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">startSession</span>(sess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RNetica)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: CPTtools</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: futile.logger</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>sess <span class="ot">&lt;-</span> <span class="fu">NeticaSession</span>(<span class="at">LicenseKey=</span><span class="st">""</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">startSession</span>(sess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Netica 5.04 Linux (AF), (C) 1992-2012 Norsys Software Corp.

Netica operating without a password; there are some limitations.</code></pre>
</div>
</div>
<p>Everything in this tutorial should run without the license.</p>
</section>
<section id="when-to-use-the-session-object." class="level2">
<h2 class="anchored" data-anchor-id="when-to-use-the-session-object.">When to use the session object.</h2>
<ul>
<li>When starting/restarting Netica</li>
<li>When creating a network, or reading one from a file.</li>
<li>When searching for networks.</li>
<li>Certain global properties</li>
</ul>
<p><code>NeticaBN</code> objects have a <code>$session</code> proprty which points back to the session.</p>
<p><code>NeticaNode</code> objects have a <code>$node</code> property which points back to the network (which points to the session).</p>
</section>
<section id="the-r-heap-and-the-netica-heap" class="level2">
<h2 class="anchored" data-anchor-id="the-r-heap-and-the-netica-heap">The R heap and the Netica heap</h2>
<p>R and Netica have two different workspaces (memory heaps)</p>
<p>R workspace is saved and restored automatically when you quick and restart R.</p>
<p>Neticaheap must be reconnected manually.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/NeticaR1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">R and Netica Heaps</figcaption><p></p>
</figure>
</div>
</section>
<section id="active-and-inactive-pointers" class="level2">
<h2 class="anchored" data-anchor-id="active-and-inactive-pointers">Active and Inactive pointers</h2>
<p>When RNetica creates/finds aNeticaobject it creates a corresponding R object</p>
<p>If the R object is active then it points to the Netica object, and the Netica object points back at it.</p>
<p>If the pointer gets broken (saving and restarting R, deleting the network/node then the R object becomes inactive.</p>
<p>The function <code>is.active(nodeOrNet)</code> test to see if the node/net is active.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/NeticaR1.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">R and Netica Heap</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="mini-aced" class="level1">
<h1>Mini-ACED</h1>
<section id="mini-aced-proficiency-model" class="level2">
<h2 class="anchored" data-anchor-id="mini-aced-proficiency-model">Mini-ACED Proficiency model</h2>
<p>Subset of ACED network: Shute, Hansen &amp; Almond (2008); <a href="http://ecd.ralmond.net/ecdwiki/ACED">http://ecd.ralmond.net/ecdwiki/ACED</a></p>
<p><a href="miniACED.zip">Download the mini-ACED file</a> Unzip it in <code>miniACED</code> and that this folder is in the same directory as this <code>qmd</code> file.</p>
<p>Next, change directory into the directory that contains <code>miniACED</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="st">"miniACED-Geometric.csv"</span> <span class="sc">%in%</span> <span class="fu">list.files</span>(<span class="st">"miniACED"</span>)) {</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">"You're good to go."</span>)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stop</span>(<span class="st">"You need to unpack 'miniACED.zip' or go to the directory where it is."</span>)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "You're good to go."</code></pre>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/miniACEDPnet.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Proficiency Model</figcaption><p></p>
</figure>
</div>
</section>
<section id="mini-aced-em-fragments" class="level2">
<h2 class="anchored" data-anchor-id="mini-aced-em-fragments">Mini-ACED EM Fragments</h2>
<p>All ACED tasks were scored correct/incorrect</p>
<p>Each evidence model is represented by a fragment consisting of observables with <em>stub</em> edges indicating where it should be <em>adjoined</em> with the network.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/CommonRatioEasyEM.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Common Ratio Easy</figcaption><p></p>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/ModelTableExtendHardEM.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Model Table Extend Hard</figcaption><p></p>
</figure>
</div>
</section>
</section>
<section id="scoring-script" class="level1">
<h1>Scoring Script</h1>
<section id="preliminaries" class="level2">
<h2 class="anchored" data-anchor-id="preliminaries">Preliminaries</h2>
</section>
<section id="task-to-em-map" class="level2">
<h2 class="anchored" data-anchor-id="task-to-em-map">Task to EM map</h2>
<p>Need a table to tell us which EM to use with which task</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Read in task-&gt;evidence model mapping</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>EMtable <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.path</span>(<span class="st">"miniACED"</span>,<span class="st">"MiniACEDEMTable.csv"</span>),</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">row.names=</span><span class="dv">1</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">as.is=</span><span class="dv">2</span>) <span class="co">#Keep EM names as strings</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>EMtable</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                 EM    X   Y
tCommonRatio1a                    CommonRatioEasyEM  108 294
tCommonRatio1b                    CommonRatioEasyEM  108 414
tCommonRatio2a                     CommonRatioMedEM  108 534
tCommonRatio2b                     CommonRatioMedEM  108 654
tCommonRatio3a                    CommonRatioHardEM  108 774
tCommonRatio3b                    CommonRatioHardEM  108 894
tExamplesGeometric1a                 ExamplesEasyEM  342 294
tExamplesGeometric1b                 ExamplesEasyEM  342 414
tExamplesGeometric2a                  ExamplesMedEM  342 534
tExamplesGeometric2b                  ExamplesMedEM  342 654
tExamplesGeometric3a                 ExamplesHardEM  342 774
tExamplesGeometric3b                 ExamplesHardEM  342 894
tExtendGeometric1a                     ExtendEasyEM  588 294
tExtendGeometric1b                     ExtendEasyEM  588 414
tExtendGeometric2a                      ExtendMedEM  588 534
tExtendGeometric2b                      ExtendMedEM  588 654
tExtendGeometric3a                     ExtendHardEM  588 774
tExtendGeometric3b                     ExtendHardEM  588 894
tTableExtendGeometric1a           TableExtendEasyEM 1134 282
tTableExtendGeometric1b           TableExtendEasyEM 1134 402
tTableExtendGeometric2a            TableExtendMedEM 1134 522
tTableExtendGeometric2b            TableExtendMedEM 1134 642
tTableExtendGeometric3a           TableExtendHardEM 1134 762
tTableExtendGeometric3b           TableExtendHardEM 1134 882
tModelExtendTableGeometric1a ModelTableExtendEasyEM  858 288
tModelExtendTableGeometric1b ModelTableExtendEasyEM  858 408
tModelExtendTableGeometric2a  ModelTableExtendMedEM  858 528
tModelExtendTableGeometric2b  ModelTableExtendMedEM  858 648
tModelExtendTableGeometric3a ModelTableExtendHardEM  858 768
tModelExtendTableGeometric3b ModelTableExtendHardEM  858 888</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Scoring Script</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="do">## Preliminaries</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval=FALSE</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RNetica)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>sess <span class="ot">&lt;-</span> <span class="fu">NeticaSession</span>()</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="fu">startSession</span>(sess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Netica environment already initialized</code></pre>
</div>
</div>
</section>
<section id="read-in-the-network." class="level2">
<h2 class="anchored" data-anchor-id="read-in-the-network.">Read in the Network.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Read in network -- Do this every time R is restarted</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>profModel <span class="ot">&lt;-</span> <span class="fu">ReadNetworks</span>(<span class="fu">file.path</span>(<span class="st">"miniACED"</span>,<span class="st">"miniACEDPnet.dne"</span>),<span class="at">session =</span> sess)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="do">## If profModels already exists could also use</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Reconnect nodes -- Do this every time R is restarted</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>allNodes <span class="ot">&lt;-</span> <span class="fu">NetworkAllNodes</span>(profModel)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>sgp <span class="ot">&lt;-</span> allNodes<span class="sc">$</span>SolveGeometricProblems</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>sgp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Discrete  Netica Node named  SolveGeometricProblems in network  MiniACEDPM 
  Node is currently active.
States are:  High, Medium, Low </code></pre>
</div>
</div>
</section>
<section id="aside-1-node-sets" class="level2">
<h2 class="anchored" data-anchor-id="aside-1-node-sets">Aside 1 – Node Sets</h2>
<p>Node sets can be viewed as either</p>
<p>A. a set of labels assigned to each node.</p>
<p>B. a set of nodes which have a particular label.</p>
<p>In RNetica, these are very useful as they define collections of nodes that might be interesting in some way (e.g., Proficiency variables, Observable variable, background variables)</p>
<p>Node set operations yeild a list of nodes; iterating over that set is often very useful.</p>
</section>
<section id="node-set-examples" class="level2">
<h2 class="anchored" data-anchor-id="node-set-examples">Node Set Examples</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Node Sets</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">NetworkNodeSets</span>(profModel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "pnodes"        "Proficiencies"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NetworkNodesInSet</span>(profModel,<span class="st">"pnodes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$TableGeometric
Discrete  Netica Node named  TableGeometric in network  MiniACEDPM 
  Node is currently active.
States are:  High, Medium, Low 

$ModelGeometric
Discrete  Netica Node named  ModelGeometric in network  MiniACEDPM 
  Node is currently active.
States are:  High, Medium, Low 

$ExtendGeometric
Discrete  Netica Node named  ExtendGeometric in network  MiniACEDPM 
  Node is currently active.
States are:  High, Medium, Low 

$ExamplesGeometric
Discrete  Netica Node named  ExamplesGeometric in network  MiniACEDPM 
  Node is currently active.
States are:  High, Medium, Low 

$CommonRatio
Discrete  Netica Node named  CommonRatio in network  MiniACEDPM 
  Node is currently active.
States are:  High, Medium, Low 

$SolveGeometricProblems
Discrete  Netica Node named  SolveGeometricProblems in network  MiniACEDPM 
  Node is currently active.
States are:  High, Medium, Low </code></pre>
</div>
</div>
</section>
<section id="more-node-set-examples" class="level2">
<h2 class="anchored" data-anchor-id="more-node-set-examples">More Node Set Examples</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>profNodes <span class="ot">&lt;-</span> <span class="fu">NetworkNodesInSet</span>(profModel,<span class="st">"Proficiencies"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeSets</span>(sgp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "pnodes"        "Proficiencies"</code></pre>
</div>
</div>
<p>Adding a node to a set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="do">## These are all settable</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeSets</span>(sgp) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">NodeSets</span>(sgp),<span class="st">"HighLevel"</span>)</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeSets</span>(sgp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "HighLevel"     "pnodes"        "Proficiencies"</code></pre>
</div>
</div>
</section>
<section id="aside-2-common-net-operations" class="level2">
<h2 class="anchored" data-anchor-id="aside-2-common-net-operations">Aside 2: Common Net operations</h2>
<p>Just about everything that can be done through the Netica GUI, can be done through the Netica API, and hence through R Netica. [In practice, the API version has lagged the GUI version, and my RNetica release lag Norsys’s API updates.] Many more examples are in the RNetica help.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Querying Nodes</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeStates</span>(sgp)   <span class="co">#List states</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    High   Medium      Low 
  "High" "Medium"    "Low" </code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeParents</span>(sgp)  <span class="co">#List parents</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>named list()</code></pre>
</div>
</div>
</section>
<section id="more-rnetica-queries" class="level2">
<h2 class="anchored" data-anchor-id="more-rnetica-queries">More RNetica Queries</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeLevels</span>(sgp)   <span class="co">#List numeric values associated with states</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      High     Medium        Low 
 0.9674216  0.0000000 -0.9674216 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeProbs</span>(sgp) <span class="co"># Conditional Probability Table (as array)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>SolveGeometricProblems
  High Medium    Low 
0.1532 0.2784 0.5684 
attr(,"class")
[1] "CPA"   "array"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="do">## These are all settable (can be used on RHS of &lt;-) for model</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="do">## construction</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="conditional-probability-tables-as-data-frame" class="level2">
<h2 class="anchored" data-anchor-id="conditional-probability-tables-as-data-frame">Conditional Probability Tables (as Data Frame)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>sgp[] <span class="co"># Conditional Probability Table (as data frame)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  SolveGeometricProblems.High SolveGeometricProblems.Medium 
                       0.1532                        0.2784 
   SolveGeometricProblems.Low 
                       0.5684 </code></pre>
</div>
</div>
<p>Can use <code>[]</code> operator to select rows or elements</p>
<p>Can set table or (row or cell).</p>
<p><code>CPTtools</code> package has tools for building tables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package=</span><span class="st">"CPTtools"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="inference" class="level2">
<h2 class="anchored" data-anchor-id="inference">Inference</h2>
<p>Networks must be <em>compiled</em> before they are used for inference.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Inference</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">CompileNetwork</span>(profModel) <span class="co">#Lightning bolt on GUI </span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Must do this before inference</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Recompiling an already compiled network is harmless</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Enter Evidence by setting values for these functions</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeValue</span>(sgp) <span class="co">#View or set the value</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeLikelihood</span>(sgp) <span class="co">#Virtual evidence</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  High Medium    Low 
     1      1      1 </code></pre>
</div>
</div>
</section>
<section id="beliefs-marginal-probabilities" class="level2">
<h2 class="anchored" data-anchor-id="beliefs-marginal-probabilities">Beliefs (Marginal Probabilities)</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Query beliefs</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeBeliefs</span>(sgp) <span class="co">#Current probability (given entered evidence)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  High Medium    Low 
0.1532 0.2784 0.5684 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeExpectedValue</span>(sgp) <span class="co">#If node has values, EAP</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.4016734
attr(,"std_dev")
[1] 0.7169429</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="do">## These aren't settable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Retract Evidence</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">RetractNodeFinding</span>(profNodes<span class="sc">$</span>ExamplesGeometric)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="fu">RetractNetFindings</span>(profModel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="example-enter-evidence" class="level2">
<h2 class="anchored" data-anchor-id="example-enter-evidence">Example: Enter Evidence</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Enter Evidence</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeFinding</span>(profNodes<span class="sc">$</span>CommonRatio) <span class="ot">&lt;-</span> <span class="st">"Medium"</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Enter Evidence "Not Low" ("High or Medium")</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeLikelihood</span>(profNodes<span class="sc">$</span>ExamplesGeometric) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeBeliefs</span>(sgp) <span class="co">#Current probability (given entered evidence)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     High    Medium       Low 
0.0000000 0.1811515 0.8188485 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeExpectedValue</span>(sgp) <span class="co">#If node has values, EAP</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.7921717
attr(,"std_dev")
[1] 0.3725963</code></pre>
</div>
</div>
</section>
<section id="example-retract-evidence" class="level2">
<h2 class="anchored" data-anchor-id="example-retract-evidence">Example: Retract Evidence</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Retract Evidence</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">RetractNetFindings</span>(profModel)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Many more examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(RNetica)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="back-to-work" class="level2">
<h2 class="anchored" data-anchor-id="back-to-work">Back to work</h2>
<p>Simple Scoring Example</p>
<p><em>Start New Student</em> Copy the <em>proficiency model</em> to make <em>student model</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>Fred.SM <span class="ot">&lt;-</span> <span class="fu">CopyNetworks</span>(profModel,<span class="st">"Fred"</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>Fred.SMvars <span class="ot">&lt;-</span> <span class="fu">NetworkAllNodes</span>(Fred.SM)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">CompileNetwork</span>(Fred.SM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setup-score-history." class="level2">
<h2 class="anchored" data-anchor-id="setup-score-history.">Setup score history.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>prior <span class="ot">&lt;-</span> <span class="fu">NodeBeliefs</span>(Fred.SMvars<span class="sc">$</span>SolveGeometricProblems)</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>Fred.History <span class="ot">&lt;-</span> <span class="fu">matrix</span>(prior,<span class="dv">1</span>,<span class="dv">3</span>)</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(Fred.History) <span class="ot">&lt;-</span> <span class="st">"*Baseline*"</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Fred.History) <span class="ot">&lt;-</span> <span class="fu">names</span>(prior)</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>Fred.History</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             High Medium    Low
*Baseline* 0.1532 0.2784 0.5684</code></pre>
</div>
</div>
</section>
<section id="fred-does-a-task" class="level2">
<h2 class="anchored" data-anchor-id="fred-does-a-task">Fred does a task</h2>
<p>Task name and data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>t.name <span class="ot">&lt;-</span> <span class="st">"tCommonRatio1a"</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>t.isCorrect <span class="ot">&lt;-</span> <span class="st">"Yes"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Adjoin SM and EM</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>EMnet <span class="ot">&lt;-</span> <span class="fu">ReadNetworks</span>(<span class="fu">file.path</span>(<span class="st">"miniACED"</span>,</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">paste</span>(EMtable[t.name,<span class="st">"EM"</span>],<span class="st">"dne"</span>,<span class="at">sep=</span><span class="st">"."</span>)),</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>                      <span class="at">session =</span> sess)</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="fu">AdjoinNetwork</span>(Fred.SM,EMnet)</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(<span class="fu">NetworkAllNodes</span>(Fred.SM)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "SolveGeometricProblems" "CommonRatio"            "ExamplesGeometric"     
[4] "ExtendGeometric"        "ModelGeometric"         "TableGeometric"        
[7] "isCorrect"             </code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Fred.SM is now the Motif for the current task.</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="fu">CompileNetwork</span>(Fred.SM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="absorb-evidence" class="level2">
<h2 class="anchored" data-anchor-id="absorb-evidence">Absorb Evidence</h2>
<p>Enter finding</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeFinding</span>(obs<span class="sc">$</span>isCorrect) <span class="ot">&lt;-</span> t.isCorrect</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Calculate statistics of interest</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>post <span class="ot">&lt;-</span> <span class="fu">NodeBeliefs</span>(Fred.SMvars<span class="sc">$</span>SolveGeometricProblems)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>Fred.History <span class="ot">&lt;-</span> <span class="fu">rbind</span>(Fred.History,<span class="at">new=</span>post)</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Fred.History)[<span class="fu">nrow</span>(Fred.History)] <span class="ot">&lt;-</span> <span class="fu">paste</span>(t.name,t.isCorrect,<span class="at">sep=</span><span class="st">"="</span>)</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>Fred.History</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                       High    Medium       Low
*Baseline*         0.153200 0.2784000 0.5684000
tCommonRatio1a=Yes 0.160016 0.2893454 0.5506387</code></pre>
</div>
</div>
</section>
<section id="cleanup" class="level2">
<h2 class="anchored" data-anchor-id="cleanup">Cleanup</h2>
<p>Network and Observable no longer needed, so absorb it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">DeleteNetwork</span>(EMnet) <span class="do">## Delete EM</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="co">#try(AbsorbNodes(obs))</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Currently, there is a Netica bug with Absorb Nodes, we will</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="do">## leave this node in place, as that is mostly harmless.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="nd-task" class="level2">
<h2 class="anchored" data-anchor-id="nd-task">2nd Task</h2>
<p>Write a script for scoring the second task.<br>
This time Fred attempts the task <code>tCommonRatio2a</code> and gets it incorrect.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Fred does another task</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>t.name <span class="ot">&lt;-</span> <span class="st">"tCommonRatio2a"</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>t.isCorrect <span class="ot">&lt;-</span> <span class="st">"No"</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="do">## Load Evidence Model and adjoin</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Recompile</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Add Evidence</span></span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a><span class="do">## Check Finding and add to history</span></span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a><span class="do">## Clean up</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="answer-for-2nd-task" class="level2">
<h2 class="anchored" data-anchor-id="answer-for-2nd-task">Answer for 2nd Task</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="do">### Fred does another task</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>t.name <span class="ot">&lt;-</span> <span class="st">"tCommonRatio2a"</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>t.isCorrect <span class="ot">&lt;-</span> <span class="st">"No"</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>EMnet <span class="ot">&lt;-</span> <span class="fu">ReadNetworks</span>(<span class="fu">file.path</span>(<span class="st">"miniACED"</span>,</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">paste</span>(EMtable[t.name,<span class="st">"EM"</span>],<span class="st">"dne"</span>, <span class="at">sep=</span><span class="st">"."</span>)),</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">session=</span>sess)</span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="fu">AdjoinNetwork</span>(Fred.SM,EMnet)</span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="co">#NodeVisPos(obs$isCorrect) &lt;- EMtable[t.name,c("X","Y")]</span></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Fred.SM is now the Motif for the current task.</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a><span class="fu">CompileNetwork</span>(Fred.SM)</span>
<span id="cb65-12"><a href="#cb65-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-13"><a href="#cb65-13" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeFinding</span>(obs[[<span class="dv">1</span>]]) <span class="ot">&lt;-</span> t.isCorrect</span>
<span id="cb65-14"><a href="#cb65-14" aria-hidden="true" tabindex="-1"></a>post <span class="ot">&lt;-</span> <span class="fu">NodeBeliefs</span>(Fred.SMvars<span class="sc">$</span>SolveGeometricProblems)</span>
<span id="cb65-15"><a href="#cb65-15" aria-hidden="true" tabindex="-1"></a>Fred.History <span class="ot">&lt;-</span> <span class="fu">rbind</span>(Fred.History,<span class="at">new=</span>post)</span>
<span id="cb65-16"><a href="#cb65-16" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Fred.History)[<span class="fu">nrow</span>(Fred.History)] <span class="ot">&lt;-</span> </span>
<span id="cb65-17"><a href="#cb65-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste</span>(t.name,t.isCorrect,<span class="at">sep=</span><span class="st">"="</span>)</span>
<span id="cb65-18"><a href="#cb65-18" aria-hidden="true" tabindex="-1"></a>Fred.History</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                        High    Medium       Low
*Baseline*         0.1532000 0.2784000 0.5684000
tCommonRatio1a=Yes 0.1600160 0.2893454 0.5506387
tCommonRatio2a=No  0.1064912 0.2057332 0.6877756</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Cleanup:  Delete EM and Absorb observables</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">DeleteNetwork</span>(EMnet) <span class="do">## Delete EM</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="co">#AbsorbNodes(obs)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fred-does-another-task" class="level2">
<h2 class="anchored" data-anchor-id="fred-does-another-task">Fred does another task</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>t.name <span class="ot">&lt;-</span> <span class="st">"tCommonRatio2a"</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>t.isCorrect <span class="ot">&lt;-</span> <span class="st">"No"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>EMnet <span class="ot">&lt;-</span> <span class="fu">ReadNetworks</span>(<span class="fu">file.path</span>(<span class="st">"miniACED"</span>,</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>                <span class="fu">paste</span>(EMtable[t.name,<span class="st">"EM"</span>],<span class="st">"dne"</span>,<span class="at">sep=</span><span class="st">"."</span>)),</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">session=</span>sess)</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="fu">AdjoinNetwork</span>(Fred.SM,EMnet)</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>(<span class="fu">NetworkAllNodes</span>(Fred.SM)) <span class="do">## Fred.SM is now the Motif for the current task.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$SolveGeometricProblems
Discrete  Netica Node named  SolveGeometricProblems in network  Fred 
  Node is currently active.
States are:  High, Medium, Low 

$CommonRatio
Discrete  Netica Node named  CommonRatio in network  Fred 
  Node is currently active.
States are:  High, Medium, Low 

$ExamplesGeometric
Discrete  Netica Node named  ExamplesGeometric in network  Fred 
  Node is currently active.
States are:  High, Medium, Low 

$ExtendGeometric
Discrete  Netica Node named  ExtendGeometric in network  Fred 
  Node is currently active.
States are:  High, Medium, Low 

$ModelGeometric
Discrete  Netica Node named  ModelGeometric in network  Fred 
  Node is currently active.
States are:  High, Medium, Low 

$TableGeometric
Discrete  Netica Node named  TableGeometric in network  Fred 
  Node is currently active.
States are:  High, Medium, Low 

$isCorrect
Discrete  Netica Node named  isCorrect in network  Fred 
  Node is currently active.
States are:  Yes, No 

$isCorrect1
Discrete  Netica Node named  isCorrect1 in network  Fred 
  Node is currently active.
States are:  Yes, No 

$isCorrect2
Discrete  Netica Node named  isCorrect2 in network  Fred 
  Node is currently active.
States are:  Yes, No </code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">CompileNetwork</span>(Fred.SM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="task-2-continued" class="level2">
<h2 class="anchored" data-anchor-id="task-2-continued">Task 2 continued</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeFinding</span>(obs[[<span class="dv">1</span>]]) <span class="ot">&lt;-</span> t.isCorrect</span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>post <span class="ot">&lt;-</span> <span class="fu">NodeBeliefs</span>(Fred.SMvars<span class="sc">$</span>SolveGeometricProblems)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>Fred.History <span class="ot">&lt;-</span> <span class="fu">rbind</span>(Fred.History,<span class="at">new=</span>post)</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(Fred.History)[<span class="fu">nrow</span>(Fred.History)] <span class="ot">&lt;-</span> <span class="fu">paste</span>(t.name,t.isCorrect,<span class="at">sep=</span><span class="st">"="</span>)</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>Fred.History</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                         High    Medium       Low
*Baseline*         0.15320002 0.2784000 0.5684000
tCommonRatio1a=Yes 0.16001597 0.2893454 0.5506387
tCommonRatio2a=No  0.10649122 0.2057332 0.6877756
tCommonRatio2a=No  0.04991532 0.1159301 0.8341545</code></pre>
</div>
</div>
<p>Cleanup: Delete EM and Absorb observables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">DeleteNetwork</span>(EMnet) <span class="do">## Delete EM</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="co">#try(AbsorbNodes(obs))</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="do">## Currently, there is a Netica bug with Absorb Nodes, we will leave</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="do">##this the node in place as that is mostly harmless.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="fred-logs-out" class="level2">
<h2 class="anchored" data-anchor-id="fred-logs-out">Fred logs out</h2>
<p>Save network to a file.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">WriteNetworks</span>(Fred.SM,<span class="st">"FredSM.dne"</span>)</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">DeleteNetwork</span>(Fred.SM)</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">is.active</span>(Fred.SM)  <span class="do">## No longer active in Netica space</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p>Fred logs back in</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>Fred.SM <span class="ot">&lt;-</span> <span class="fu">ReadNetworks</span>(<span class="st">"FredSM.dne"</span>,<span class="at">session=</span>sess)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">is.active</span>(Fred.SM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
</section>
<section id="score-an-entire-set-of-cases." class="level1">
<h1>Score an entire set of cases.</h1>
<section id="read-in-the-scores." class="level2">
<h2 class="anchored" data-anchor-id="read-in-the-scores.">Read in the scores.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>miniACED.data <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="fu">file.path</span>(<span class="st">"miniACED"</span>,<span class="st">"miniACED-Geometric.csv"</span>),<span class="at">row.names=</span><span class="dv">1</span>)</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(miniACED.data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Class Treatment Sequencing Feedback Total.Items Correct Incorrect
S055     1         1          2        2          63       8        55
S058     1         1          2        2          63      33        30
S053     1         2          2        1          63      12        51
S061     1         1          2        2          63      21        42
S063     1         1          2        2          63      21        42
S066     1         1          2        2          63      19        44
     Remaining tCommonRatio1a tCommonRatio1b tCommonRatio3a tCommonRatio3b
S055         0              1              1              2              1
S058         0              2              2              2              1
S053         0              1              1              1              1
S061         0              1              1              1              1
S063         0              1              2              2              1
S066         0              1              2              1              1
     tCommonRatio2a tCommonRatio2b tExamplesGeometric1a tExamplesGeometric1b
S055              1              1                    1                    1
S058              1              2                    2                    1
S053              1              1                    1                    1
S061              1              1                    1                    1
S063              1              1                    2                    1
S066              1              1                    2                    1
     tExamplesGeometric3a tExamplesGeometric3b tExamplesGeometric2a
S055                    1                    1                    1
S058                    1                    1                    1
S053                    1                    1                    1
S061                    1                    1                    1
S063                    1                    1                    1
S066                    1                    1                    1
     tExamplesGeometric2b tExtendGeometric1a tExtendGeometric1b
S055                    1                  1                  1
S058                    1                  1                  2
S053                    1                  1                  1
S061                    1                  2                  2
S063                    1                  1                  2
S066                    1                  1                  2
     tExtendGeometric3a tExtendGeometric3b tExtendGeometric2a
S055                  2                  1                  1
S058                  2                  1                  2
S053                  1                  1                  1
S061                  1                  1                  1
S063                  2                  2                  2
S066                  2                  2                  1
     tExtendGeometric2b tModelExtendTableGeometric1a
S055                  1                            1
S058                  1                            2
S053                  1                            1
S061                  2                            1
S063                  1                            1
S066                  1                            2
     tModelExtendTableGeometric1b tModelExtendTableGeometric3a
S055                            1                            1
S058                            2                            2
S053                            1                            2
S061                            2                            2
S063                            2                            1
S066                            1                            2
     tModelExtendTableGeometric3b tModelExtendTableGeometric2a
S055                            1                            1
S058                            2                            1
S053                            1                            1
S061                            1                            1
S063                            2                            1
S066                            2                            1
     tModelExtendTableGeometric2b tTableExtendGeometric1a
S055                            1                       1
S058                            2                       1
S053                            2                       1
S061                            1                       1
S063                            1                       2
S066                            1                       2
     tTableExtendGeometric1b tTableExtendGeometric3a tTableExtendGeometric3b
S055                       1                       1                       1
S058                       1                       1                       2
S053                       1                       1                       2
S061                       1                       1                       2
S063                       1                       1                       1
S066                       1                       1                       2
     tTableExtendGeometric2a tTableExtendGeometric2b
S055                       1                       2
S058                       1                       1
S053                       1                       1
S061                       1                       1
S063                       1                       1
S066                       2                       2</code></pre>
</div>
</div>
<p>Some meta-data</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Mark columns of table corresponding to tasks</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>first.task <span class="ot">&lt;-</span> <span class="dv">9</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>last.task <span class="ot">&lt;-</span> <span class="dv">20</span> <span class="co">#ncol(miniACED.data)</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Code key for numeric values</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>t.vals <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"No"</span>,<span class="st">"Yes"</span>)</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Pick a student, we might normally iterate over this.</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>Student.row <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setup-for-student-in-sample" class="level2">
<h2 class="anchored" data-anchor-id="setup-for-student-in-sample">Setup for student in sample</h2>
<p>Create Student Model from Proficiency Model</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>Student.SM <span class="ot">&lt;-</span> <span class="fu">CopyNetworks</span>(profModel,<span class="st">"Student"</span>)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>Student.SMvars <span class="ot">&lt;-</span> <span class="fu">NetworkAllNodes</span>(Student.SM)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="fu">CompileNetwork</span>(Student.SM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Initialize history list</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>prior <span class="ot">&lt;-</span> <span class="fu">NodeBeliefs</span>(Student.SMvars<span class="sc">$</span>SolveGeometricProblems)</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>Student.History <span class="ot">&lt;-</span> <span class="fu">matrix</span>(prior,<span class="dv">1</span>,<span class="dv">3</span>)</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="fu">row.names</span>(Student.History) <span class="ot">&lt;-</span> <span class="st">"*Baseline*"</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(Student.History) <span class="ot">&lt;-</span> <span class="fu">names</span>(prior)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="now-loop-over-tasks" class="level2">
<h2 class="anchored" data-anchor-id="now-loop-over-tasks">Now loop over tasks</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (itask <span class="cf">in</span> first.task<span class="sc">:</span>last.task) {</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Look up the EM for the task, and adjoin it.</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  tid <span class="ot">&lt;-</span> <span class="fu">names</span>(miniACED.data)[itask]</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(tid)</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  EMnet <span class="ot">&lt;-</span> <span class="fu">ReadNetworks</span>(<span class="fu">file.path</span>(<span class="st">"miniACED"</span>,</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>                                  <span class="fu">paste</span>(EMtable[tid,<span class="st">"EM"</span>],<span class="st">"dne"</span>,<span class="at">sep=</span><span class="st">"."</span>)),</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">session=</span>sess)</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">sapply</span>(<span class="fu">NetworkAllNodes</span>(EMnet),NodeVisPos))</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">browser</span>()</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a>  obs <span class="ot">&lt;-</span> <span class="fu">AdjoinNetwork</span>(Student.SM,EMnet)</span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">CompileNetwork</span>(Student.SM)</span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-14"><a href="#cb84-14" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Add the evidence</span></span>
<span id="cb84-15"><a href="#cb84-15" aria-hidden="true" tabindex="-1"></a>  t.val <span class="ot">&lt;-</span> t.vals[miniACED.data[Student.row,itask]] <span class="co">#Decode integer</span></span>
<span id="cb84-16"><a href="#cb84-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">NodeFinding</span>(obs[[<span class="dv">1</span>]]) <span class="ot">&lt;-</span> t.val</span>
<span id="cb84-17"><a href="#cb84-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb84-18"><a href="#cb84-18" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Update the history</span></span>
<span id="cb84-19"><a href="#cb84-19" aria-hidden="true" tabindex="-1"></a>  post <span class="ot">&lt;-</span> <span class="fu">NodeBeliefs</span>(Student.SMvars<span class="sc">$</span>SolveGeometricProblems)</span>
<span id="cb84-20"><a href="#cb84-20" aria-hidden="true" tabindex="-1"></a>  Student.History <span class="ot">&lt;-</span> <span class="fu">rbind</span>(Student.History,<span class="at">new=</span>post)</span>
<span id="cb84-21"><a href="#cb84-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(Student.History)[<span class="fu">nrow</span>(Student.History)] <span class="ot">&lt;-</span> <span class="fu">paste</span>(tid,t.val,<span class="at">sep=</span><span class="st">"="</span>)</span>
<span id="cb84-22"><a href="#cb84-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-23"><a href="#cb84-23" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Cleanup, Delete EM and Absob Observables</span></span>
<span id="cb84-24"><a href="#cb84-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">DeleteNetwork</span>(EMnet)</span>
<span id="cb84-25"><a href="#cb84-25" aria-hidden="true" tabindex="-1"></a>  <span class="co">#try(AbsorbNodes(obs)) # Still broken</span></span>
<span id="cb84-26"><a href="#cb84-26" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "tCommonRatio1a"
  isCorrect
x         0
y         0
Called from: eval(expr, envir, enclos)
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tCommonRatio1b"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tCommonRatio3a"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tCommonRatio3b"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tCommonRatio2a"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tCommonRatio2b"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tExamplesGeometric1a"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tExamplesGeometric1b"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tExamplesGeometric3a"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tExamplesGeometric3b"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tExamplesGeometric2a"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)
debug at &lt;text&gt;#4: tid &lt;- names(miniACED.data)[itask]
debug at &lt;text&gt;#5: print(tid)
[1] "tExamplesGeometric2b"
debug at &lt;text&gt;#6: EMnet &lt;- ReadNetworks(file.path("miniACED", paste(EMtable[tid, 
    "EM"], "dne", sep = ".")), session = sess)
debug at &lt;text&gt;#9: print(sapply(NetworkAllNodes(EMnet), NodeVisPos))
  isCorrect
x         0
y         0
debug at &lt;text&gt;#10: browser()
debug at &lt;text&gt;#11: obs &lt;- AdjoinNetwork(Student.SM, EMnet)
debug at &lt;text&gt;#12: CompileNetwork(Student.SM)
debug at &lt;text&gt;#15: t.val &lt;- t.vals[miniACED.data[Student.row, itask]]
debug at &lt;text&gt;#16: NodeFinding(obs[[1]]) &lt;- t.val
debug at &lt;text&gt;#19: post &lt;- NodeBeliefs(Student.SMvars$SolveGeometricProblems)
debug at &lt;text&gt;#20: Student.History &lt;- rbind(Student.History, new = post)
debug at &lt;text&gt;#21: rownames(Student.History)[nrow(Student.History)] &lt;- paste(tid, 
    t.val, sep = "=")
debug at &lt;text&gt;#24: DeleteNetwork(EMnet)</code></pre>
</div>
</div>
</section>
<section id="now-look-at-the-scoring-history." class="level2">
<h2 class="anchored" data-anchor-id="now-look-at-the-scoring-history.">Now look at the scoring history.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>Student.History</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                High     Medium       Low
*Baseline*              0.1532000154 0.27840000 0.5684000
tCommonRatio1a=No       0.0693975762 0.14382692 0.7867755
tCommonRatio1b=No       0.0131133273 0.04543132 0.9414554
tCommonRatio3a=Yes      0.0576437376 0.12699647 0.8153598
tCommonRatio3b=No       0.0383302718 0.09589107 0.8657787
tCommonRatio2a=No       0.0122262547 0.05103555 0.9367382
tCommonRatio2b=No       0.0033196749 0.03242403 0.9642563
tExamplesGeometric1a=No 0.0010064315 0.02298103 0.9760125
tExamplesGeometric1b=No 0.0006250255 0.02056840 0.9788066
tExamplesGeometric3a=No 0.0006051398 0.02043075 0.9789641
tExamplesGeometric3b=No 0.0005891956 0.02031317 0.9790976
tExamplesGeometric2a=No 0.0005483013 0.01998808 0.9794636
tExamplesGeometric2b=No 0.0005246418 0.01979495 0.9796804</code></pre>
</div>
</div>
</section>
</section>
<section id="weight-of-evidence" class="level1">
<h1>Weight of Evidence</h1>
<section id="weight-of-evidence-1" class="level2">
<h2 class="anchored" data-anchor-id="weight-of-evidence-1">Weight of Evidence</h2>
<p>Good (1985)</p>
<p><em>H</em> is binary hypothesis, e.g., <em>Proficiency</em> &gt; <em>Medium</em></p>
<p><em>E</em> is evidence for hypothesis</p>
<p>Weight of Evidence (WOE) is</p>
<p><span class="math display">\[ W(H:E) = \log \frac{P(E|H)}{P(E|\overline{H})} =
\log  \frac{P(H|E)}{P(\overline{H}|E)} -
\log  \frac{P(H)}{P(\overline{H})} \]</span></p>
</section>
<section id="conditional-weight-of-evidence" class="level2">
<h2 class="anchored" data-anchor-id="conditional-weight-of-evidence">Conditional Weight of Evidence</h2>
<p><span class="math display">\[ W(H: E_2 | E_1) = \log  \frac{P(E_2|H,E_1)}{P(E_2|\overline{H},E_1)}
\]</span> Additive properties</p>
<p><span class="math display">\[ W(H: E_1, E2) = W(H: E_1) + W(H: E_2|E_1) \]</span></p>
<p>Order senstive (evidence seen earlier is worth more)</p>
<p>WOE Balance Sheet:</p>
</section>
<section id="now-examine-scoring-history" class="level2">
<h2 class="anchored" data-anchor-id="now-examine-scoring-history">Now examine scoring history</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">woeBal</span>(Student.History,<span class="fu">c</span>(<span class="st">"High"</span>,<span class="st">"Medium"</span>),<span class="st">"Low"</span>,</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">title=</span><span class="fu">paste</span>(<span class="st">"Evidence Balance Sheet for "</span>,</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">rownames</span>(miniACED.data)[Student.row]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Scoring_files/figure-html/woe balance sheet-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="for-more-information" class="level2">
<h2 class="anchored" data-anchor-id="for-more-information">For More information</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(RNetica)</span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package=</span><span class="st">"RNetica"</span>)</span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(CPTtools)</span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package=</span><span class="st">"CPTtools"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>