<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Russell Almond">
<meta name="dcterms.date" content="2021-06-04">

<title>Peanut Tutorial - DiBello Models</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Peanut Tutorial</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./ECD.html">
 <span class="menu-text">ECD Intro</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./BayesNets.html">
 <span class="menu-text">Bayesian Networks</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Scoring.html">
 <span class="menu-text">Scoring</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./DiBelloModels.html" aria-current="page">
 <span class="menu-text">Making CPTs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Building.html">
 <span class="menu-text">Building Nets</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Updating.html">
 <span class="menu-text">Calibration</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Visualization.html">
 <span class="menu-text">Model checking and visualzation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Dynamic.html">
 <span class="menu-text">Dynamic Models</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./Resources.html">
 <span class="menu-text">Resources</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./References.html">
 <span class="menu-text">References</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar"><div class="quarto-margin-header"><div class="margin-header-item">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./img/PeanutLogo.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Peanut Logo</figcaption><p></p>
</figure>
</div>
</div></div>
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#parameterized-bayesian-networks" id="toc-parameterized-bayesian-networks" class="nav-link active" data-scroll-target="#parameterized-bayesian-networks">Parameterized Bayesian Networks</a></li>
  <li><a href="#conditional-probability-tables" id="toc-conditional-probability-tables" class="nav-link" data-scroll-target="#conditional-probability-tables">Conditional Probability Tables</a>
  <ul class="collapse">
  <li><a href="#lets-make-a-some-simple-cpts" id="toc-lets-make-a-some-simple-cpts" class="nav-link" data-scroll-target="#lets-make-a-some-simple-cpts">Lets Make a some Simple CPTs</a></li>
  <li><a href="#create-a-simple-network." id="toc-create-a-simple-network." class="nav-link" data-scroll-target="#create-a-simple-network.">Create a Simple Network.</a></li>
  <li><a href="#the-shape-of-cpts" id="toc-the-shape-of-cpts" class="nav-link" data-scroll-target="#the-shape-of-cpts">The Shape of CPTs</a></li>
  <li><a href="#conditional-probability-table" id="toc-conditional-probability-table" class="nav-link" data-scroll-target="#conditional-probability-table">Conditional Probability Table</a></li>
  <li><a href="#multiple-parents" id="toc-multiple-parents" class="nav-link" data-scroll-target="#multiple-parents">Multiple Parents</a></li>
  <li><a href="#the---operator-for-neticanodes" id="toc-the---operator-for-neticanodes" class="nav-link" data-scroll-target="#the---operator-for-neticanodes">The [&lt;- operator for NeticaNodes</a></li>
  <li><a href="#conditional-tables" id="toc-conditional-tables" class="nav-link" data-scroll-target="#conditional-tables">Conditional Tables</a></li>
  <li><a href="#fill-out-a-conjunctive-model." id="toc-fill-out-a-conjunctive-model." class="nav-link" data-scroll-target="#fill-out-a-conjunctive-model.">Fill out a conjunctive model.</a></li>
  <li><a href="#conditional-probability-frames-and-conditional-probability-arrays" id="toc-conditional-probability-frames-and-conditional-probability-arrays" class="nav-link" data-scroll-target="#conditional-probability-frames-and-conditional-probability-arrays">Conditional Probability Frames and Conditional Probability Arrays</a></li>
  <li><a href="#array-view" id="toc-array-view" class="nav-link" data-scroll-target="#array-view">Array view</a></li>
  <li><a href="#graphing-a-conditional-probability-table." id="toc-graphing-a-conditional-probability-table." class="nav-link" data-scroll-target="#graphing-a-conditional-probability-table.">Graphing a conditional probability table.</a></li>
  <li><a href="#barchart" id="toc-barchart" class="nav-link" data-scroll-target="#barchart">Barchart</a></li>
  <li><a href="#how-far-have-we-come" id="toc-how-far-have-we-come" class="nav-link" data-scroll-target="#how-far-have-we-come">How far have we come?</a></li>
  </ul></li>
  <li><a href="#the-dibello-models" id="toc-the-dibello-models" class="nav-link" data-scroll-target="#the-dibello-models">The DiBello Models</a>
  <ul class="collapse">
  <li><a href="#a-short-history" id="toc-a-short-history" class="nav-link" data-scroll-target="#a-short-history">A Short History</a></li>
  <li><a href="#the-dibello-procedure-effective-thetas" id="toc-the-dibello-procedure-effective-thetas" class="nav-link" data-scroll-target="#the-dibello-procedure-effective-thetas">The DiBello procedure: Effective Thetas</a></li>
  <li><a href="#setting-effective-thetas" id="toc-setting-effective-thetas" class="nav-link" data-scroll-target="#setting-effective-thetas">Setting Effective Thetas</a></li>
  <li><a href="#dibello-procedure-combination-rules" id="toc-dibello-procedure-combination-rules" class="nav-link" data-scroll-target="#dibello-procedure-combination-rules">DiBello Procedure: Combination Rules</a></li>
  <li><a href="#dibello-procedure-3" id="toc-dibello-procedure-3" class="nav-link" data-scroll-target="#dibello-procedure-3">DiBello Procedure 3:</a></li>
  <li><a href="#mapping-parent-states-onto-the-theta-scale" id="toc-mapping-parent-states-onto-the-theta-scale" class="nav-link" data-scroll-target="#mapping-parent-states-onto-the-theta-scale">Mapping Parent States onto the Theta Scale</a></li>
  <li><a href="#equally-spaced-points-in-normal-measure" id="toc-equally-spaced-points-in-normal-measure" class="nav-link" data-scroll-target="#equally-spaced-points-in-normal-measure">Equally spaced points in Normal Measure</a></li>
  <li><a href="#setting-up-effective-thetas" id="toc-setting-up-effective-thetas" class="nav-link" data-scroll-target="#setting-up-effective-thetas">Setting up effective Thetas</a></li>
  <li><a href="#combination-rules" id="toc-combination-rules" class="nav-link" data-scroll-target="#combination-rules">Combination Rules</a></li>
  <li><a href="#compensatory-rule" id="toc-compensatory-rule" class="nav-link" data-scroll-target="#compensatory-rule">Compensatory Rule</a></li>
  <li><a href="#conjunctive-and-disjunctive-rules-multi-a" id="toc-conjunctive-and-disjunctive-rules-multi-a" class="nav-link" data-scroll-target="#conjunctive-and-disjunctive-rules-multi-a">Conjunctive and Disjunctive Rules (Multi-a)</a></li>
  <li><a href="#conjunctive-and-disjunctive-rules-multi-b" id="toc-conjunctive-and-disjunctive-rules-multi-b" class="nav-link" data-scroll-target="#conjunctive-and-disjunctive-rules-multi-b">Conjunctive and Disjunctive Rules (Multi-b)</a></li>
  <li><a href="#implementation-in-cpttools" id="toc-implementation-in-cpttools" class="nav-link" data-scroll-target="#implementation-in-cpttools">Implementation in CPTtools</a></li>
  <li><a href="#offset-style-rules" id="toc-offset-style-rules" class="nav-link" data-scroll-target="#offset-style-rules">Offset Style Rules:</a></li>
  <li><a href="#link-functions" id="toc-link-functions" class="nav-link" data-scroll-target="#link-functions">Link Functions</a></li>
  <li><a href="#graded-response-model" id="toc-graded-response-model" class="nav-link" data-scroll-target="#graded-response-model">Graded Response model</a></li>
  <li><a href="#normal-regression-model" id="toc-normal-regression-model" class="nav-link" data-scroll-target="#normal-regression-model">Normal (Regression) model</a></li>
  <li><a href="#generalized-partial-credit-model" id="toc-generalized-partial-credit-model" class="nav-link" data-scroll-target="#generalized-partial-credit-model">Generalized partial credit model</a></li>
  <li><a href="#graded-response-dibellosamejima-models" id="toc-graded-response-dibellosamejima-models" class="nav-link" data-scroll-target="#graded-response-dibellosamejima-models">Graded Response (DiBello–Samejima models)</a></li>
  <li><a href="#continuous---discrete" id="toc-continuous---discrete" class="nav-link" data-scroll-target="#continuous---discrete">Continuous -&gt; Discrete</a></li>
  <li><a href="#representing-graded-response-models-in-peanut" id="toc-representing-graded-response-models-in-peanut" class="nav-link" data-scroll-target="#representing-graded-response-models-in-peanut">Representing Graded Response Models in Peanut</a></li>
  <li><a href="#setting-the-parameters" id="toc-setting-the-parameters" class="nav-link" data-scroll-target="#setting-the-parameters">Setting the parameters</a></li>
  <li><a href="#building-the-table" id="toc-building-the-table" class="nav-link" data-scroll-target="#building-the-table">Building the Table</a></li>
  <li><a href="#dont-cross-the-curves" id="toc-dont-cross-the-curves" class="nav-link" data-scroll-target="#dont-cross-the-curves">Don’t Cross the curves!</a></li>
  <li><a href="#graded-response-when-the-curves-cross" id="toc-graded-response-when-the-curves-cross" class="nav-link" data-scroll-target="#graded-response-when-the-curves-cross">Graded Response when the curves cross</a></li>
  <li><a href="#downside-of-graded-response-model" id="toc-downside-of-graded-response-model" class="nav-link" data-scroll-target="#downside-of-graded-response-model">Downside of Graded Response Model</a></li>
  <li><a href="#normal-regression-model-1" id="toc-normal-regression-model-1" class="nav-link" data-scroll-target="#normal-regression-model-1">Normal (Regression) Model</a></li>
  <li><a href="#normal-link-regression-model-features" id="toc-normal-link-regression-model-features" class="nav-link" data-scroll-target="#normal-link-regression-model-features">Normal Link (Regression Model) features</a></li>
  <li><a href="#normal-link-no-parent-case" id="toc-normal-link-no-parent-case" class="nav-link" data-scroll-target="#normal-link-no-parent-case">Normal Link: No Parent case</a></li>
  <li><a href="#regression-gadget-no-parents" id="toc-regression-gadget-no-parents" class="nav-link" data-scroll-target="#regression-gadget-no-parents">Regression Gadget, no parents</a></li>
  <li><a href="#normal-link-one-parent-case" id="toc-normal-link-one-parent-case" class="nav-link" data-scroll-target="#normal-link-one-parent-case">Normal Link: One Parent case</a></li>
  <li><a href="#regression-gadget-multiple-parents" id="toc-regression-gadget-multiple-parents" class="nav-link" data-scroll-target="#regression-gadget-multiple-parents">Regression Gadget, multiple parents</a></li>
  <li><a href="#partial-credit-models" id="toc-partial-credit-models" class="nav-link" data-scroll-target="#partial-credit-models">Partial Credit Models</a></li>
  <li><a href="#partial-credit-link" id="toc-partial-credit-link" class="nav-link" data-scroll-target="#partial-credit-link">Partial Credit Link:</a></li>
  <li><a href="#simple-case-1-multiple-a-rules" id="toc-simple-case-1-multiple-a-rules" class="nav-link" data-scroll-target="#simple-case-1-multiple-a-rules">Simple Case 1: Multiple-A rules</a></li>
  <li><a href="#simple-case-example" id="toc-simple-case-example" class="nav-link" data-scroll-target="#simple-case-example">Simple Case: Example</a></li>
  <li><a href="#compensator-gadget" id="toc-compensator-gadget" class="nav-link" data-scroll-target="#compensator-gadget">Compensator Gadget</a></li>
  <li><a href="#simple-case-2-multiple-b-rules" id="toc-simple-case-2-multiple-b-rules" class="nav-link" data-scroll-target="#simple-case-2-multiple-b-rules">Simple Case 2: Multiple-B rules</a></li>
  <li><a href="#case-2-example" id="toc-case-2-example" class="nav-link" data-scroll-target="#case-2-example">Case 2 example</a></li>
  <li><a href="#offset-gadget" id="toc-offset-gadget" class="nav-link" data-scroll-target="#offset-gadget">Offset Gadget</a></li>
  <li><a href="#discrete-partial-credit-model-unleashed" id="toc-discrete-partial-credit-model-unleashed" class="nav-link" data-scroll-target="#discrete-partial-credit-model-unleashed">Discrete Partial Credit model unleashed</a></li>
  <li><a href="#peanut-convention-lists-versus-vectors" id="toc-peanut-convention-lists-versus-vectors" class="nav-link" data-scroll-target="#peanut-convention-lists-versus-vectors">Peanut convention: Lists versus Vectors</a></li>
  <li><a href="#example-math-word-problem" id="toc-example-math-word-problem" class="nav-link" data-scroll-target="#example-math-word-problem">Example: Math Word Problem</a></li>
  <li><a href="#scoring-rubric" id="toc-scoring-rubric" class="nav-link" data-scroll-target="#scoring-rubric">Scoring Rubric</a></li>
  <li><a href="#model-refinement" id="toc-model-refinement" class="nav-link" data-scroll-target="#model-refinement">Model Refinement</a></li>
  <li><a href="#inner-q-matrix" id="toc-inner-q-matrix" class="nav-link" data-scroll-target="#inner-q-matrix">Inner Q-matrix</a></li>
  <li><a href="#complex-example" id="toc-complex-example" class="nav-link" data-scroll-target="#complex-example">Complex Example</a></li>
  <li><a href="#the-dpcgadget" id="toc-the-dpcgadget" class="nav-link" data-scroll-target="#the-dpcgadget">The DPCGadget</a></li>
  <li><a href="#peanut-functions-summary" id="toc-peanut-functions-summary" class="nav-link" data-scroll-target="#peanut-functions-summary">Peanut Functions Summary</a></li>
  <li><a href="#peanut-node-gadgets" id="toc-peanut-node-gadgets" class="nav-link" data-scroll-target="#peanut-node-gadgets">Peanut Node Gadgets</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">DiBello Models</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Russell Almond </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 4, 2021</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<section id="parameterized-bayesian-networks" class="level2">
<h2 class="anchored" data-anchor-id="parameterized-bayesian-networks">Parameterized Bayesian Networks</h2>
<ul>
<li><p>In a discrete Bayesian Network, the <em>parameters</em> are the <em>conditional probability tables</em> (CPTs).</p></li>
<li><p>Size of CPT grows exponentially with number of parents.</p></li>
<li><p>In educational models, CPTs should be monotonic: higher skill states should imply higher probability of success.</p></li>
<li><p>When learning CPTs from data, if skill variables are correlated certain combinations will be rare in data:</p>
<ul>
<li>Skill 1 is high and Skill 2 is low</li>
<li>Skill 2 is low and Skill 1 is high</li>
<li>This makes for low effective sample size (high standard errors) when estimating CPTs from data.</li>
</ul></li>
</ul>
</section>
<section id="conditional-probability-tables" class="level1">
<h1>Conditional Probability Tables</h1>
<section id="lets-make-a-some-simple-cpts" class="level2">
<h2 class="anchored" data-anchor-id="lets-make-a-some-simple-cpts">Lets Make a some Simple CPTs</h2>
<p>Load PNetica (which loads Peanut and CPTtools), and start session. Build a blank Network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(PNetica)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: RNetica</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: CPTtools</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: Peanut</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>sess <span class="ot">&lt;-</span> <span class="fu">NeticaSession</span>()</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">startSession</span>(sess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Netica 6.07 Linux (AFCl64), (C) 1992-2019 Norsys Software Corp.

Netica is operating without a password; there are some limitations.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>tNet <span class="ot">&lt;-</span> <span class="fu">CreateNetwork</span>(<span class="st">"tNet"</span>,sess)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following packages are loaded.</p>
<ul>
<li><code>CPTtools</code> – Tools for building Conditional Probability Tables.</li>
<li><code>RNetica</code> – Interface to Netica</li>
<li><code>Peanut</code> – Object-oriented parameterized network protocol.</li>
<li><code>PNetica</code> – Peanut implementation for Netica</li>
</ul>
</section>
<section id="create-a-simple-network." class="level2">
<h2 class="anchored" data-anchor-id="create-a-simple-network.">Create a Simple Network.</h2>
<p>Create two parent nodes: Skill1 and Skill2, and a child node, CRItem.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>Skills <span class="ot">&lt;-</span> <span class="fu">NewDiscreteNode</span>(tNet,<span class="fu">paste</span>(<span class="st">"Skill"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>,<span class="at">sep=</span><span class="st">""</span>),<span class="fu">c</span>(<span class="st">"H"</span>,<span class="st">"M"</span>,<span class="st">"L"</span>))</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>CRItem <span class="ot">&lt;-</span> <span class="fu">NewDiscreteNode</span>(tNet,<span class="st">"CRItem"</span>,<span class="fu">c</span>(<span class="st">"FullCredit"</span>,<span class="st">"PartialCredit"</span>,<span class="st">"NoCredit"</span>))</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeParents</span>(CRItem) <span class="ot">&lt;-</span> Skills</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">NodeParents</span>(Skills[[<span class="dv">2</span>]]) <span class="ot">&lt;-</span> Skills[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-shape-of-cpts" class="level2">
<h2 class="anchored" data-anchor-id="the-shape-of-cpts">The Shape of CPTs</h2>
<p>Skill1 has no parents, so unconditional CPT.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>Skills[[<span class="dv">1</span>]][]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Skill1.H Skill1.M Skill1.L 
      NA       NA       NA </code></pre>
</div>
</div>
<p>Node that in RNetica the <code>[]</code> operator can be used to access the CPT of a node.</p>
</section>
<section id="conditional-probability-table" class="level2">
<h2 class="anchored" data-anchor-id="conditional-probability-table">Conditional Probability Table</h2>
<p>Skill2 has one parent, so conditional CPT.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>Skills[[<span class="dv">2</span>]][]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2.H Skill2.M Skill2.L
1      H       NA       NA       NA
2      M       NA       NA       NA
3      L       NA       NA       NA</code></pre>
</div>
</div>
</section>
<section id="multiple-parents" class="level2">
<h2 class="anchored" data-anchor-id="multiple-parents">Multiple Parents</h2>
<p>CRItem has two parents, for total of nine (3x3) rows.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>CRItem[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2 CRItem.FullCredit CRItem.PartialCredit CRItem.NoCredit
1      H      H                NA                   NA              NA
2      M      H                NA                   NA              NA
3      L      H                NA                   NA              NA
4      H      M                NA                   NA              NA
5      M      M                NA                   NA              NA
6      L      M                NA                   NA              NA
7      H      L                NA                   NA              NA
8      M      L                NA                   NA              NA
9      L      L                NA                   NA              NA</code></pre>
</div>
</div>
</section>
<section id="the---operator-for-neticanodes" class="level2">
<h2 class="anchored" data-anchor-id="the---operator-for-neticanodes">The [&lt;- operator for NeticaNodes</h2>
<p>RNetica maps the assignment operator for <code>[]</code> (<code>[&lt;-</code>) to provide a wide variety of behaviors.</p>
<p>Both <code>[</code> and <code>[&lt;-</code> allow the user to specify a specific row or cell, or group of rows and cells. This is similar, but not quite the same as the <code>[</code> operator behavior for matrixes and data frames.</p>
<p>Single Row:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>CRItem[Skill1<span class="ot">=</span><span class="st">"H"</span>,Skill2<span class="ot">=</span><span class="st">"H"</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">7</span>,.<span class="dv">2</span>,.<span class="dv">1</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>CRItem[<span class="st">"H"</span>,<span class="st">"H"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2 CRItem.FullCredit CRItem.PartialCredit CRItem.NoCredit
1      H      H               0.7                  0.2             0.1</code></pre>
</div>
</div>
</section>
<section id="conditional-tables" class="level2">
<h2 class="anchored" data-anchor-id="conditional-tables">Conditional Tables</h2>
<p>Multiple Rows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>CRItem[Skill2<span class="ot">=</span><span class="st">"M"</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">25</span>,.<span class="dv">5</span>,.<span class="dv">25</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>CRItem[<span class="st">"M"</span>,<span class="fu">c</span>(<span class="st">"H"</span>,<span class="st">"M"</span>)] <span class="ot">&lt;-</span><span class="fu">c</span>(.<span class="dv">25</span>,.<span class="dv">5</span>,.<span class="dv">25</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>CRItem[,<span class="st">"M"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2 CRItem.FullCredit CRItem.PartialCredit CRItem.NoCredit
1      H      M              0.25                  0.5            0.25
2      M      M              0.25                  0.5            0.25
3      L      M              0.25                  0.5            0.25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>CRItem[<span class="st">"M"</span>,]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2 CRItem.FullCredit CRItem.PartialCredit CRItem.NoCredit
1      M      H      2.500000e-01         5.000000e-01    2.500000e-01
2      M      M      2.500000e-01         5.000000e-01    2.500000e-01
3      M      L     -3.396031e+38        -3.396031e+38   -3.396031e+38</code></pre>
</div>
</div>
</section>
<section id="fill-out-a-conjunctive-model." class="level2">
<h2 class="anchored" data-anchor-id="fill-out-a-conjunctive-model.">Fill out a conjunctive model.</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>CRItem[<span class="st">"L"</span>,] <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">1</span>,.<span class="dv">2</span>,.<span class="dv">7</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>CRItem[,<span class="st">"L"</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">1</span>,.<span class="dv">2</span>,.<span class="dv">7</span>)</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>CRItem[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2 CRItem.FullCredit CRItem.PartialCredit CRItem.NoCredit
1      H      H              0.70                  0.2            0.10
2      M      H              0.25                  0.5            0.25
3      L      H              0.10                  0.2            0.70
4      H      M              0.25                  0.5            0.25
5      M      M              0.25                  0.5            0.25
6      L      M              0.10                  0.2            0.70
7      H      L              0.10                  0.2            0.70
8      M      L              0.10                  0.2            0.70
9      L      L              0.10                  0.2            0.70</code></pre>
</div>
</div>
</section>
<section id="conditional-probability-frames-and-conditional-probability-arrays" class="level2">
<h2 class="anchored" data-anchor-id="conditional-probability-frames-and-conditional-probability-arrays">Conditional Probability Frames and Conditional Probability Arrays</h2>
<p>When there are two or more parent variables, there are two possible views of the CPT:</p>
<ul>
<li><p><em>Conditional Probability Frame</em> (CPF) which is a data frame where rows represent configurations of parent variables.</p>
<ul>
<li><p>First <span class="math inline">\(p\)</span> columns represent parent configuration</p></li>
<li><p>Last <span class="math inline">\(|States|\)</span> columns represent child states.</p></li>
<li><p>Numeric part is the conditional probability table</p>
<ul>
<li>Note: <code>calcXXXFrame()</code> and <code>calcXXXTable()</code> methods in CPTtools</li>
</ul></li>
<li><p>CPFs can be used on the RHS of <code>[&lt;-</code> operator for NeticaNodes, to set the CPT.</p></li>
</ul></li>
</ul>
</section>
<section id="array-view" class="level2">
<h2 class="anchored" data-anchor-id="array-view">Array view</h2>
<ul>
<li><em>Conditional Probability Array</em> (CPA) which is <span class="math inline">\(p+1\)</span> dimenional array.</li>
</ul>
<p>The functions <code>as.CPF</code> and <code>as.CPA</code> convert back and forth between the two views:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.CPA</span>(CRItem[])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>, , CRItem = FullCredit

      Skill2
Skill1    H    M   L
     H 0.70 0.25 0.1
     M 0.25 0.25 0.1
     L 0.10 0.10 0.1

, , CRItem = PartialCredit

      Skill2
Skill1   H   M   L
     H 0.2 0.5 0.2
     M 0.5 0.5 0.2
     L 0.2 0.2 0.2

, , CRItem = NoCredit

      Skill2
Skill1    H    M   L
     H 0.10 0.25 0.7
     M 0.25 0.25 0.7
     L 0.70 0.70 0.7

attr(,"class")
[1] "CPA"   "array"</code></pre>
</div>
</div>
</section>
<section id="graphing-a-conditional-probability-table." class="level2">
<h2 class="anchored" data-anchor-id="graphing-a-conditional-probability-table.">Graphing a conditional probability table.</h2>
<p>The function <code>barchart.CPF</code> (which extends the lattice function <code>barchart</code>) will build a visualization of the CPF.</p>
<p>The <code>baseCol</code> argument can be any R color specification, it is then used as the base color for the graph.</p>
</section>
<section id="barchart" class="level2">
<h2 class="anchored" data-anchor-id="barchart">Barchart</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barchart.CPF</span>(CRItem[],<span class="at">baseCol=</span><span class="st">"chocolate"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="DiBelloModels_files/figure-html/barchart-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="how-far-have-we-come" class="level2">
<h2 class="anchored" data-anchor-id="how-far-have-we-come">How far have we come?</h2>
<ul>
<li><p>The <code>[]</code> function for NeticaNodes is a very convenient way for accessing and manipulating CPTs</p></li>
<li><p>It uses a data-frame representation, the <em>CPF</em></p></li>
<li><p>If we can make a CPF, we can set the table for a node.</p></li>
<li><p>The package <code>CPTtools</code> is all about making CPFs!</p></li>
</ul>
</section>
</section>
<section id="the-dibello-models" class="level1">
<h1>The DiBello Models</h1>
<section id="a-short-history" class="level2">
<h2 class="anchored" data-anchor-id="a-short-history">A Short History</h2>
<ul>
<li>When building CPT for Biomass, Lou DiBello had an idea.</li>
<li>Map each row of the CPT onto an <em>effective Theta</em></li>
<li>Then use IRT model (Samejima’s Graded Response) to calculate CPTs for each row.</li>
<li>For multivariate parents, use a <em>structure function</em> or <em>combination rule</em> to combine indivitual effective thetas for each parent into a single effective theta.
<ul>
<li><em>Compensatory</em>: (weighted) average of parents</li>
<li><em>Conjunctive</em>: minimum of parents</li>
<li><em>Disjunctive</em>: maximum of parents</li>
</ul></li>
</ul>
</section>
<section id="the-dibello-procedure-effective-thetas" class="level2">
<h2 class="anchored" data-anchor-id="the-dibello-procedure-effective-thetas">The DiBello procedure: Effective Thetas</h2>
<p>1 Map the states of the parent variables onto the standard normal (theta) scale.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">effectiveThetas</span>(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.6744898 -0.6744898</code></pre>
</div>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">effectiveThetas</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.9674216  0.0000000 -0.9674216</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">effectiveThetas</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1.1503494  0.3186394 -0.3186394 -1.1503494</code></pre>
</div>
</div>
</section>
<section id="setting-effective-thetas" class="level2">
<h2 class="anchored" data-anchor-id="setting-effective-thetas">Setting Effective Thetas</h2>
<p>The function <code>PnodeStateValues()</code> sets the effective Thetas for a node.</p>
<p>The function <code>ParentNodeTVals()</code> fetches the effective Thetas for the</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeStateValues</span>(Skills[[<span class="dv">1</span>]]) <span class="ot">&lt;-</span> <span class="fu">effectiveThetas</span>(<span class="fu">PnodeNumStates</span>(Skills[[<span class="dv">1</span>]]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="dibello-procedure-combination-rules" class="level2">
<h2 class="anchored" data-anchor-id="dibello-procedure-combination-rules">DiBello Procedure: Combination Rules</h2>
<p>2 Combine the parent variables using a <em>combination rule</em> to create a single effective theta for each row.</p>
<pre><code>+ The combination rule generally has slope (discrimination)
parameters ($\alpha$'s or $a$'s)

+ The combination rule generally has difficulty (intercept)
parameters ($\beta$'s or $b$'s)

+ Some rules (e.g., `Compensatory`) have multiple-a's, some (e.g.,
`OffsetConjuctive`) have multiple-b's

+ Some link functions allow (or even require) different b's for
each state of the child variable (step difficulties).

+ The partial credit link function allows different a's as well.</code></pre>
</section>
<section id="dibello-procedure-3" class="level2">
<h2 class="anchored" data-anchor-id="dibello-procedure-3">DiBello Procedure 3:</h2>
<p>3 Convert the effective thetas to conditional probablities using a <em>link function</em> (IRT-like models)</p>
<pre><code>+ `gradedResponse` -- Lou's original suggestion
+ `partialCredit` -- More flexible alternative
+ `normalLink` -- Regression-like model for proficiency variables.
    - Requires a _link scale parameters_</code></pre>
<p>The function <code>calcDPCFrame</code> in the CPTtools package does the work. (DPC = Discrete Partial Credit)</p>
</section>
<section id="mapping-parent-states-onto-the-theta-scale" class="level2">
<h2 class="anchored" data-anchor-id="mapping-parent-states-onto-the-theta-scale">Mapping Parent States onto the Theta Scale</h2>
<ul>
<li><p>Effective theta scale is a logit scale corresponds to mean 0 SD 1 in a “standard” population.</p></li>
<li><p>Want the effective theta values to be equally spaced on this scale</p></li>
<li><p>Want the marginal distribution implied by the effective thetas to be uniform (unit of the combination operator)</p></li>
</ul>
<p>*What the effective theta transformation to be effectively invertible (this is reason to add the 1.7 to the IRT equation).</p>
</section>
<section id="equally-spaced-points-in-normal-measure" class="level2">
<h2 class="anchored" data-anchor-id="equally-spaced-points-in-normal-measure">Equally spaced points in Normal Measure</h2>
<ul>
<li>Assume variable has <span class="math inline">\(M\)</span> states: <span class="math inline">\(0, \ldots, M-1\)</span></li>
<li>Region <span class="math inline">\(m\)</span> will have lower bound <span class="math inline">\(m/M\)</span> quantile and upper bound at <span class="math inline">\((m+1)/M\)</span> quantile.</li>
<li>Midpoint will be at <span class="math inline">\((m+\frac{1}{2})/M\)</span> quantile</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="DiBelloModels_files/figure-html/normal quantiles-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="setting-up-effective-thetas" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-effective-thetas">Setting up effective Thetas</h2>
<p>The function <code>effectiveThetas</code> calculates this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>effectiveThetas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>function (nlevels) 
{
    rev(qnorm((2 * (1:nlevels) - 1)/(2 * nlevels), 0, 1))
}
&lt;bytecode: 0x555a2e188cf0&gt;
&lt;environment: namespace:CPTtools&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">effectiveThetas</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  0.9674216  0.0000000 -0.9674216</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="do">## We will need this for building CPTs later.</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeStateValues</span>(Skills[[<span class="dv">1</span>]]) <span class="ot">&lt;-</span> <span class="fu">effectiveThetas</span>(<span class="fu">PnodeNumStates</span>(Skills[[<span class="dv">1</span>]]))</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeStateValues</span>(Skills[[<span class="dv">2</span>]]) <span class="ot">&lt;-</span> <span class="fu">effectiveThetas</span>(<span class="fu">PnodeNumStates</span>(Skills[[<span class="dv">2</span>]]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="combination-rules" class="level2">
<h2 class="anchored" data-anchor-id="combination-rules">Combination Rules</h2>
<ul>
<li><code>Compensatory</code> – more of one skill compensates for lack of another</li>
<li><code>Conjunctive</code> – weakest skill dominates relationship</li>
<li><code>Disjunctive</code> – strongest skill dominates relationship</li>
<li>Inhibitor – minimum threshold of Skill 1 needed, then Skill&nbsp;2 takes over (special case of conjuctive) Multi-b rules:</li>
<li><code>OffsetConjunctive</code> – like conjunctive model, but with separate <span class="math inline">\(b\)</span>’s for each parent instead of separate <span class="math inline">\(a\)</span>’s</li>
<li><code>Offset Disjunctive</code> – like disjunctive rule, but with separate <span class="math inline">\(b\)</span>’s for each parent instead of separate <span class="math inline">\(a\)</span>’s.</li>
</ul>
</section>
<section id="compensatory-rule" class="level2">
<h2 class="anchored" data-anchor-id="compensatory-rule">Compensatory Rule</h2>
<ul>
<li>Weighted average of inputs</li>
<li>One <span class="math inline">\(\alpha\)</span> (slope) for each parent variable (<span class="math inline">\(k\)</span>) and state (<span class="math inline">\(s\)</span>): <span class="math inline">\(\alpha_{k,s}\)</span></li>
<li>One <span class="math inline">\(\beta\)</span> (difficulty) for each state of the child variable (except the last): <span class="math inline">\(\beta_s\)</span></li>
</ul>
<p><span class="math display">\[ \tilde\theta = \frac{1}{\sqrt{K}} \sum_k \alpha_{k,s}\tilde\theta_{k,m_k} - \beta_s\]</span> * Factor <span class="math inline">\(1/\sqrt{K}\)</span> is a variance stabilization term. (Make variance independent of number of parents.)</p>
</section>
<section id="conjunctive-and-disjunctive-rules-multi-a" class="level2">
<h2 class="anchored" data-anchor-id="conjunctive-and-disjunctive-rules-multi-a">Conjunctive and Disjunctive Rules (Multi-a)</h2>
<ul>
<li>Replace sum (and square root of K) with <code>min</code> or <code>max</code></li>
<li>Conjunctive: All skills needed; weakest skill dominates</li>
</ul>
<p><span class="math display">\[ \tilde\theta = \min_k \alpha_{k,s}\tilde\theta_{k,m_k} - \beta_s\]</span></p>
<ul>
<li>Disjunctive: Any skills needed; strongest skill dominates</li>
</ul>
<p><span class="math display">\[ \tilde\theta = \max_k \alpha_{k,s}\tilde\theta_{k,m_k} - \beta_s\]</span></p>
<ul>
<li>Not sure what the different slopes mean in this context</li>
</ul>
</section>
<section id="conjunctive-and-disjunctive-rules-multi-b" class="level2">
<h2 class="anchored" data-anchor-id="conjunctive-and-disjunctive-rules-multi-b">Conjunctive and Disjunctive Rules (Multi-b)</h2>
<ul>
<li><p>Different skills may have different demands in a task</p>
<ul>
<li>Skill 1 must be high, but Skill 2 only medium</li>
</ul></li>
<li><p>Model this with different difficulties (<span class="math inline">\(b\)</span>’s) for each parent skill.</p></li>
<li><p>OffsetConjunctive: All skills needed; weakest skill dominates</p></li>
</ul>
<p><span class="math display">\[ \tilde\theta =  \alpha_{s}\min_k\left(\tilde\theta_{k,m_k} - \beta_{k,s} \right)\]</span></p>
<ul>
<li>Disjunctive: Any skills needed; strongest skill dominates</li>
</ul>
<p><span class="math display">\[ \tilde\theta =  \alpha_{s}\max_k\left(\tilde\theta_{k,m_k} - \beta_{k,s} \right)\]</span></p>
</section>
<section id="implementation-in-cpttools" class="level2">
<h2 class="anchored" data-anchor-id="implementation-in-cpttools">Implementation in CPTtools</h2>
<ul>
<li><p><code>Compensatory</code>, <code>Conjunctive</code>, <code>Disjunctive</code>, <code>OffsetConjunctive</code> and <code>OffsetDisjunctive</code> are implemented as functions in CPTtools</p>
<ul>
<li>This set is expandable by adding new functions with the same signature</li>
</ul></li>
<li><p>The function <code>eThetaFrame</code> demonstrates how this works.</p></li>
<li><p>Note: Uses <span class="math inline">\(\log(\alpha)\)</span> rather than <span class="math inline">\(\alpha\)</span> as slope parameter.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">eThetaFrame</span>(<span class="fu">ParentStates</span>(CRItem),<span class="fu">log</span>(<span class="fu">c</span>(<span class="at">Skill1=</span><span class="fl">1.2</span>,<span class="at">Skill2=</span>.<span class="dv">8</span>)),<span class="dv">0</span>,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>            Compensatory)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2 Skill1.theta Skill2.theta Effective.theta
1      H      H    0.9674216    0.9674216       1.3681407
2      M      H    0.0000000    0.9674216       0.5472563
3      L      H   -0.9674216    0.9674216      -0.2736281
4      H      M    0.9674216    0.0000000       0.8208844
5      M      M    0.0000000    0.0000000       0.0000000
6      L      M   -0.9674216    0.0000000      -0.8208844
7      H      L    0.9674216   -0.9674216       0.2736281
8      M      L    0.0000000   -0.9674216      -0.5472563
9      L      L   -0.9674216   -0.9674216      -1.3681407</code></pre>
</div>
</div>
<p>Try changing the slopes and intercepts</p>
</section>
<section id="offset-style-rules" class="level2">
<h2 class="anchored" data-anchor-id="offset-style-rules">Offset Style Rules:</h2>
<p>Almost the same, except now we expect beta to be a vector instead of alpha.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">eThetaFrame</span>(<span class="fu">ParentStates</span>(CRItem),<span class="fu">log</span>(<span class="dv">1</span>),<span class="fu">c</span>(<span class="at">Skill1=</span>.<span class="dv">5</span>,<span class="at">Skill2=</span><span class="sc">-</span>.<span class="dv">5</span>),</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>            OffsetConjunctive)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2 Skill1.theta Skill2.theta Effective.theta
1      H      H    0.9674216    0.9674216       0.4674216
2      M      H    0.0000000    0.9674216      -0.5000000
3      L      H   -0.9674216    0.9674216      -1.4674216
4      H      M    0.9674216    0.0000000       0.4674216
5      M      M    0.0000000    0.0000000      -0.5000000
6      L      M   -0.9674216    0.0000000      -1.4674216
7      H      L    0.9674216   -0.9674216      -0.4674216
8      M      L    0.0000000   -0.9674216      -0.5000000
9      L      L   -0.9674216   -0.9674216      -1.4674216</code></pre>
</div>
</div>
<p>Try changing the slopes and intercepts, and changing the rule for <code>OffSetDisjunctive</code></p>
</section>
<section id="link-functions" class="level2">
<h2 class="anchored" data-anchor-id="link-functions">Link Functions</h2>
<ul>
<li>Graded Response Model</li>
<li>Normal (Regression) Model</li>
<li>Partial Credit Model</li>
<li>2PL (Special case of graded response or partial credit)</li>
</ul>
</section>
<section id="graded-response-model" class="level2">
<h2 class="anchored" data-anchor-id="graded-response-model">Graded Response model</h2>
<ul>
<li>Models <span class="math inline">\(\Pr(X \ge s)\)</span></li>
<li>Probabilities are differences between curves</li>
<li>To keep the curves from crossing, discrimination parameters must be the same for all <span class="math inline">\(s\)</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLink</span>(node) <span class="ot">&lt;-</span> <span class="st">"gradedResponse"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="normal-regression-model" class="level2">
<h2 class="anchored" data-anchor-id="normal-regression-model">Normal (Regression) model</h2>
<ul>
<li>Effective theta is mean predictor</li>
<li>Add a residual variance (link scale parameter)</li>
<li>Calculate probabilities that value falls into certain regions</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLink</span>(node) <span class="ot">&lt;-</span> <span class="st">"normalLink"</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLinkScale</span>(node) <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="generalized-partial-credit-model" class="level2">
<h2 class="anchored" data-anchor-id="generalized-partial-credit-model">Generalized partial credit model</h2>
<ul>
<li>Models state transitions: <span class="math inline">\(\Pr(X \ge s | X \ge s-1)\)</span></li>
<li>Does not need the discrimination parameters to be the same</li>
<li>Does not even need the combination rules to be the same</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLink</span>(node) <span class="ot">&lt;-</span> <span class="st">"partialCredit"</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>node <span class="ot">&lt;-</span> <span class="fu">Pnode</span>(node) <span class="do">## Partial credit is the default.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="graded-response-dibellosamejima-models" class="level2">
<h2 class="anchored" data-anchor-id="graded-response-dibellosamejima-models">Graded Response (DiBello–Samejima models)</h2>
<p>Samejima’s (1969) psychometric model for graded responses</p>
<p><span class="math display">\[\Pr(X_{i,j} \ge k|\theta_i) = {\rm logit}^{-1}(1.7(a_j\theta_i - b_{j,k}))\]</span></p>
<p><span class="math display">\[\Pr(X_{i,j}=k|\theta_i) = \Pr(X_{i,j} \ge k|\theta_i) - \Pr(X_{i,j} \ge k+1|\theta_i)\]</span></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="DiBelloModels_files/figure-html/Samejima curves-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="continuous---discrete" class="level2">
<h2 class="anchored" data-anchor-id="continuous---discrete">Continuous -&gt; Discrete</h2>
<p>Evaluate Samejima’s graded response model at the effective theta values.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="DiBelloModels_files/figure-html/Samejima link function-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>     Theta State2 State1 State0
Low   -1.8  0.057  0.253  0.690
Med   -0.4  0.198  0.448  0.354
High   1.0  0.500  0.381  0.119</code></pre>
</div>
</div>
</section>
<section id="representing-graded-response-models-in-peanut" class="level2">
<h2 class="anchored" data-anchor-id="representing-graded-response-models-in-peanut">Representing Graded Response Models in Peanut</h2>
<ul>
<li>Peanut is a framework that allows us to attach the parameters to nodes in the graph.
<ul>
<li>PNetica implements this for NeticaNode objects</li>
</ul></li>
<li><code>PnodeLink(node)</code> accesses the link function
<ul>
<li>Should have value “gradedResponse” for graded response models.</li>
</ul></li>
<li><code>PnodeRules(node)</code> accesses the rules.
<ul>
<li>For now, stick to multiple-a types: <code>Compensatory</code>, <code>Conjunctive</code> and <code>Disjunctive</code>.</li>
</ul></li>
</ul>
</section>
<section id="setting-the-parameters" class="level2">
<h2 class="anchored" data-anchor-id="setting-the-parameters">Setting the parameters</h2>
<ul>
<li><code>PnodeLnAlphas(node)</code> or <code>PnodeAlphas(node)</code> gives the slope parameters.
<ul>
<li>This should be a vector which components corresponding to the parents.</li>
<li>In general, vectors are used to represent multiple parents.</li>
</ul></li>
<li><code>PnodeBetas(node)</code> gives the difficulty parameters.
<ul>
<li>This should be a <em>list</em> with one fewer elements than there are states (the last state is used for normalization).</li>
<li>In general, lists are used to represent multiple states.</li>
</ul></li>
</ul>
</section>
<section id="building-the-table" class="level2">
<h2 class="anchored" data-anchor-id="building-the-table">Building the Table</h2>
<ul>
<li><code>BuildTable(node)</code> builds the table.
<ul>
<li><code>PnodeStateValues</code> of parents need to be set.</li>
<li><code>PnodePriorWeight</code> (used in learning algorithm) needs to be set.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>CRItem <span class="ot">&lt;-</span> <span class="fu">Pnode</span>(CRItem) <span class="do">## Force into Pnode protocol.</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLink</span>(CRItem) <span class="ot">&lt;-</span> <span class="st">"gradedResponse"</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeRules</span>(CRItem) <span class="ot">&lt;-</span> <span class="st">"Compensatory"</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeAlphas</span>(CRItem) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.2</span>,.<span class="dv">8</span>)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeBetas</span>(CRItem) <span class="ot">&lt;-</span> <span class="fu">list</span>(.<span class="dv">25</span>, <span class="sc">-</span>.<span class="dv">25</span>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodePriorWeight</span>(CRItem) <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="do">## Used for learning</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="fu">calcDPCFrame</span>(<span class="fu">ParentStates</span>(CRItem),<span class="fu">PnodeStates</span>(CRItem),</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeLnAlphas</span>(CRItem),<span class="fu">PnodeBetas</span>(CRItem),</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeRules</span>(CRItem),<span class="fu">PnodeLink</span>(CRItem))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2 FullCredit PartialCredit   NoCredit
1      H      H 0.86998648    0.06997425 0.06003927
2      M      H 0.62371241    0.17128816 0.20499942
3      L      H 0.29107519    0.19888420 0.51004061
4      H      M 0.72521985    0.13540669 0.13937347
5      M      M 0.39532092    0.20935817 0.39532092
6      L      M 0.13937347    0.13540669 0.72521985
7      H      L 0.51004061    0.19888420 0.29107519
8      M      L 0.20499942    0.17128816 0.62371241
9      L      L 0.06003927    0.06997425 0.86998648</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BuildTable</span>(CRItem)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>CRItem <span class="ot">&lt;-</span> <span class="fu">CompensatoryGadget</span>(CRItem)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>CRItem[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://pluto.coe.fsu.edu/rdemos/Peanut/CompensatoryGadget.Rmd" class="uri">https://pluto.coe.fsu.edu/rdemos/Peanut/CompensatoryGadget.Rmd</a></p>
</section>
<section id="dont-cross-the-curves" class="level2">
<h2 class="anchored" data-anchor-id="dont-cross-the-curves">Don’t Cross the curves!</h2>
<blockquote class="blockquote">
<p><strong>Egon Spengler</strong>: There’s something very important I forgot to tell you.</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>Peter Venkman</strong>: What?</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>Egon</strong>: Don’t cross the streams.</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>Venkman</strong>: Why?</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>Egon</strong>: It would be bad.</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>Venkman</strong>: I’m fuzzy on the whole good/bad thing. What do you mean, “bad”?</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>Egon</strong>: Try to imagine all life as you know it stopping instantaneously, and every molecule in your body exploding at the speed of light.</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>Ray Stantz</strong>: [shocked gasp] Total protonic reversal.</p>
</blockquote>
<blockquote class="blockquote">
<p><strong>Venkman</strong>: Right. That’s bad. Okay. All right. Important safety tip. Thanks, Egon.</p>
</blockquote>
<blockquote class="blockquote">
<p><em>Ghostbusters</em></p>
</blockquote>
</section>
<section id="graded-response-when-the-curves-cross" class="level2">
<h2 class="anchored" data-anchor-id="graded-response-when-the-curves-cross">Graded Response when the curves cross</h2>
<p>Actually, not as bad as crossing the proton beams, can produce negative probabilities.</p>
<p>CPTtools corrects, but still puts restrictions on parameters.</p>
<p>In particular, must have a common discrimination for all states of the child variable to ensure curves don’t cross.</p>
</section>
<section id="downside-of-graded-response-model" class="level2">
<h2 class="anchored" data-anchor-id="downside-of-graded-response-model">Downside of Graded Response Model</h2>
<ul>
<li><p>Need to keep curves from crossing restricts discrimination parameter</p>
<ul>
<li><p>In <em>Physics Playground (v. 1)</em> for some levels difference between <strong>Silver</strong> trophy and <strong>Gold</strong> trophy had more evidence (higher discrimination) than difference between <strong>Silver</strong> and <strong>none</strong></p></li>
<li><p>All steps must have the same parent variables and the same combination rule.</p></li>
</ul></li>
<li><p>Models probility of achiving certain level of performance, not step between levels.</p></li>
<li><p>Generalized Partial Credit (GPC) model does not have these downsides.</p></li>
<li><p>Note Graded Response and GPC are the same when child variable has only two states.</p></li>
</ul>
</section>
<section id="normal-regression-model-1" class="level2">
<h2 class="anchored" data-anchor-id="normal-regression-model-1">Normal (Regression) Model</h2>
<ul>
<li>As with effective theta transformation, start by dividing theta region up into equally spaced intervals</li>
<li>Calculate offset curve:
<ul>
<li>mean is effective theta</li>
<li>SD, <span class="math inline">\(s\)</span>, is <em>link scale parameter</em> *Conditional probabilities:</li>
<li>area under curve between cut points</li>
</ul></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<p><img src="DiBelloModels_files/figure-html/normal offset-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>      Low    Medium      High 
0.1223318 0.3431666 0.5345016 </code></pre>
</div>
</div>
</section>
<section id="normal-link-regression-model-features" class="level2">
<h2 class="anchored" data-anchor-id="normal-link-regression-model-features">Normal Link (Regression Model) features</h2>
<ul>
<li>Link function is inverse of the mapping from states to effective thetas
<ul>
<li>Rounding error, but no scale distortion</li>
<li>Good for proficiency variables</li>
</ul></li>
<li>Can be used for no parent case.</li>
<li>Often better to use intercept (negative difficulty) rather than difficulty.</li>
<li>Can use <span class="math inline">\(R^2\)</span> instead of the link scale parameter, <span class="math inline">\(\sigma\)</span></li>
</ul>
<p><span class="math display">\[ R^2 = \frac{1/K \sum_k \alpha_{k,s}^2}
{1/K \sum_k \alpha_{k,s}^2 +\sigma^2} \]</span></p>
<ul>
<li>Note: Latent (tetrachoric) correlations, not observed score correlations</li>
<li>Can use factor analysis output to get model structure and parameters (Almond, 2010)</li>
</ul>
</section>
<section id="normal-link-no-parent-case" class="level2">
<h2 class="anchored" data-anchor-id="normal-link-no-parent-case">Normal Link: No Parent case</h2>
<ul>
<li><code>PnodeLink(node)</code> is now “normalLink”</li>
<li>Now need <code>PnodeLinkScale(node)</code>, residual standard deviation (<span class="math inline">\(\sigma\)</span>)</li>
<li>Rule doesn’t matter, use <code>PnodeRules(node)="Compensatory"</code></li>
<li>Should be only one <code>PnodeBeta(node)</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>Skill1 <span class="ot">&lt;-</span> <span class="fu">Pnode</span>(Skills[[<span class="dv">1</span>]]) <span class="do">## Force into Pnode protocol.</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLink</span>(Skill1) <span class="ot">&lt;-</span> <span class="st">"normalLink"</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLinkScale</span>(Skill1) <span class="ot">&lt;-</span> .<span class="dv">8</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeRules</span>(Skill1) <span class="ot">&lt;-</span> <span class="st">"Compensatory"</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeAlphas</span>(Skill1) <span class="ot">&lt;-</span> <span class="fu">numeric</span>()</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeBetas</span>(Skill1) <span class="ot">&lt;-</span> <span class="fu">list</span>(.<span class="dv">25</span>)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodePriorWeight</span>(Skill1) <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="do">## Used for learning</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="fu">BuildTable</span>(Skill1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>WARN [2023-04-11 10:54:12] Alpha vector for node Skill1 is empty.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calcDPCFrame</span>(<span class="fu">ParentStates</span>(Skill1),<span class="fu">PnodeStates</span>(Skill1),</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeLnAlphas</span>(Skill1),<span class="fu">PnodeBetas</span>(Skill1),</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeRules</span>(Skill1),<span class="fu">PnodeLink</span>(Skill1),</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeLinkScale</span>(Skill1))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          H        M         L
1 0.1974099 0.391954 0.4106361</code></pre>
</div>
</div>
</section>
<section id="regression-gadget-no-parents" class="level2">
<h2 class="anchored" data-anchor-id="regression-gadget-no-parents">Regression Gadget, no parents</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>Skill1 <span class="ot">&lt;-</span> <span class="fu">RegressionGadget</span>(Skill1)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>Skill1[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://pluto.coe.fsu.edu/rdemos/Peanut/EASD_EASD.Rmd" class="uri">https://pluto.coe.fsu.edu/rdemos/Peanut/EASD_EASD.Rmd</a></p>
</section>
<section id="normal-link-one-parent-case" class="level2">
<h2 class="anchored" data-anchor-id="normal-link-one-parent-case">Normal Link: One Parent case</h2>
<ul>
<li><code>PnodeLink(node)</code> is now “normalLink”</li>
<li>Now need <code>PnodeLinkScale(node)</code>, residual standard deviation (<span class="math inline">\(\sigma\)</span>)</li>
<li>Works best with <code>PnodeRules(node)="Compensatory"</code></li>
<li>Should be only one <code>PnodeBeta(node)</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>Skill2 <span class="ot">&lt;-</span> <span class="fu">Pnode</span>(Skills[[<span class="dv">2</span>]]) <span class="do">## Force into Pnode protocol.</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLink</span>(Skill2) <span class="ot">&lt;-</span> <span class="st">"normalLink"</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLinkScale</span>(Skill2) <span class="ot">&lt;-</span> .<span class="dv">6</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeRules</span>(Skill2) <span class="ot">&lt;-</span> <span class="st">"Compensatory"</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeAlphas</span>(Skill2) <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">8</span>)</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeBetas</span>(Skill2) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="sc">-</span>.<span class="dv">25</span>)</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodePriorWeight</span>(Skill2) <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="do">## Used for learning</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a><span class="fu">BuildTable</span>(Skill2)</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="fu">calcDPCFrame</span>(<span class="fu">ParentStates</span>(Skill2),<span class="fu">PnodeStates</span>(Skill2),</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeLnAlphas</span>(Skill2),<span class="fu">PnodeBetas</span>(Skill2),</span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeRules</span>(Skill2),<span class="fu">PnodeLink</span>(Skill2),</span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeLinkScale</span>(Skill2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1          H         M           L
1      H 0.83859093 0.1537431 0.007665989
2      M 0.38162636 0.4900907 0.128282900
3      L 0.05579268 0.3824800 0.561727270</code></pre>
</div>
</div>
</section>
<section id="regression-gadget-multiple-parents" class="level2">
<h2 class="anchored" data-anchor-id="regression-gadget-multiple-parents">Regression Gadget, multiple parents</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>Skill2 <span class="ot">&lt;-</span> <span class="fu">RegressionGadget</span>(Skill2)</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>Skill2[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://pluto.coe.fsu.edu/rdemos/Peanut/RegressionGadget.Rmd" class="uri">https://pluto.coe.fsu.edu/rdemos/Peanut/RegressionGadget.Rmd</a></p>
</section>
<section id="partial-credit-models" class="level2">
<h2 class="anchored" data-anchor-id="partial-credit-models">Partial Credit Models</h2>
<ul>
<li>Observable variable takes on states <span class="math inline">\(0, \ldots, S\)</span></li>
<li>Model transition probabilities:</li>
</ul>
<p><span class="math display">\[P_{s|s-1}(\tilde{\bf \theta}) = \Pr(X \ge s | X \ge s-1, \tilde{\bf \theta}) =
{\rm logit}^{-1} 1.7 Z_s(\tilde{\bf \theta})  \]</span></p>
<ul>
<li>Define <span class="math inline">\(Z_0()=0\)</span>.</li>
<li><span class="math inline">\(Z_s()\)</span> can vary will <span class="math inline">\(s\)</span>:
<ul>
<li>Different parameters</li>
<li>Different functional forms</li>
<li>Can easily switch between multi-a and multi-b combination rules</li>
<li>Can use only a subset of the parents!</li>
</ul></li>
<li>Need to define combination rule and parameters for each state (except state 0).</li>
<li><code>PnodeLnAlphas</code>,<code>PnodeBetas</code> and <code>PnodeRules</code> are now lists (one element per state)</li>
</ul>
</section>
<section id="partial-credit-link" class="level2">
<h2 class="anchored" data-anchor-id="partial-credit-link">Partial Credit Link:</h2>
<ul>
<li>Probability of <span class="math inline">\(X\)</span> being in state <span class="math inline">\(s\)</span> is:</li>
</ul>
<p><span class="math display">\[\Pr(X = s | \tilde{\bf\theta}) = \frac{\prod_{r=0}^s P_{r|r-1}(\tilde{\bf\theta})}{C}, \]</span></p>
<p>where <span class="math inline">\(C\)</span> is a normalization constant.</p>
<ul>
<li>Can convert the products to sums</li>
</ul>
<p><span class="math display">\[\Pr(X = s | \tilde{\bf\theta}) = \frac{\exp\left(1.7\sum_{r=0}^s Z_r(\tilde{\bf\theta})\right)}{\sum_{R=0}^S \exp\left(1.7\sum_{r=0}^R Z_r(\tilde{\bf\theta})\right)}\]</span></p>
</section>
<section id="simple-case-1-multiple-a-rules" class="level2">
<h2 class="anchored" data-anchor-id="simple-case-1-multiple-a-rules">Simple Case 1: Multiple-A rules</h2>
<ul>
<li>These look a lot like graded response</li>
<li><code>PnodeLink(pnode) = "partialCredit"</code></li>
<li><code>PnodeRules(pnode)</code> is a single value
<ul>
<li>“Compensatory”, “Conjunctive”, “Disjunctive”</li>
</ul></li>
<li><code>PnodeLnAlphas(pnode)</code> is a <em>vector</em> corresponding to parents</li>
<li><code>PnodeBetas(pnode)</code> is a <em>list</em> corresponding to states.
<ul>
<li><span class="math inline">\(Z_s()\)</span> has the same functional form and the same parameters except for <span class="math inline">\(b\)</span>’s</li>
</ul></li>
<li>Use <code>CompensatoryGadget</code> to edit this style table.</li>
</ul>
</section>
<section id="simple-case-example" class="level2">
<h2 class="anchored" data-anchor-id="simple-case-example">Simple Case: Example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>CRItem <span class="ot">&lt;-</span> <span class="fu">Pnode</span>(CRItem) <span class="do">## Force into Pnode protocol.</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLink</span>(CRItem) <span class="ot">&lt;-</span> <span class="st">"partialCredit"</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeRules</span>(CRItem) <span class="ot">&lt;-</span> <span class="st">"Compensatory"</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeAlphas</span>(CRItem) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.2</span>,.<span class="dv">8</span>)</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeBetas</span>(CRItem) <span class="ot">&lt;-</span> <span class="fu">list</span>(.<span class="dv">25</span>, <span class="sc">-</span>.<span class="dv">25</span>)</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodePriorWeight</span>(CRItem) <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="do">## Used for learning</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="fu">BuildTable</span>(CRItem)</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="fu">calcDPCFrame</span>(<span class="fu">ParentStates</span>(CRItem),<span class="fu">PnodeStates</span>(CRItem),</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeLnAlphas</span>(CRItem),<span class="fu">PnodeBetas</span>(CRItem),</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeRules</span>(CRItem),<span class="fu">PnodeLink</span>(CRItem))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2  FullCredit PartialCredit    NoCredit
1      H      H 0.862821165     0.1289427 0.008236118
2      M      H 0.568546469     0.3430058 0.088447725
3      L      H 0.167478982     0.4079015 0.424619527
4      H      M 0.694323128     0.2630736 0.042603245
5      M      M 0.283318992     0.4333620 0.283318992
6      L      M 0.042603245     0.2630736 0.694323128
7      H      L 0.424619527     0.4079015 0.167478982
8      M      L 0.088447725     0.3430058 0.568546469
9      L      L 0.008236118     0.1289427 0.862821165</code></pre>
</div>
</div>
</section>
<section id="compensator-gadget" class="level2">
<h2 class="anchored" data-anchor-id="compensator-gadget">Compensator Gadget</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>CRItem <span class="ot">&lt;-</span> <span class="fu">CompensatoryGadget</span>(CRItem)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>CRItem[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://pluto.coe.fsu.edu/rdemos/Peanut/CompensatoryGadget.Rmd" class="uri">https://pluto.coe.fsu.edu/rdemos/Peanut/CompensatoryGadget.Rmd</a></p>
</section>
<section id="simple-case-2-multiple-b-rules" class="level2">
<h2 class="anchored" data-anchor-id="simple-case-2-multiple-b-rules">Simple Case 2: Multiple-B rules</h2>
<ul>
<li>These look a lot like multiple-a rules.</li>
<li><code>PnodeLink(pnode) = "partialCredit"</code></li>
<li><code>PnodeRules(pnode)</code> is a single value
<ul>
<li>“OffsetConjunctive”, “OffsetDisjunctive”</li>
</ul></li>
<li><code>PnodeLnAlphas(pnode)</code> is a <em>list</em> corresponding to states</li>
<li><code>PnodeBetas(pnode)</code> is a <em>vector</em> corresponding to parent.
<ul>
<li><span class="math inline">\(Z_s()\)</span> has the same functional form and the same parameters except for <span class="math inline">\(b\)</span>’s</li>
</ul></li>
<li>Use <code>OffsetGadget</code> to edit this style table.</li>
</ul>
</section>
<section id="case-2-example" class="level2">
<h2 class="anchored" data-anchor-id="case-2-example">Case 2 example</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>CRItem <span class="ot">&lt;-</span> <span class="fu">Pnode</span>(CRItem) <span class="do">## Force into Pnode protocol.</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLink</span>(CRItem) <span class="ot">&lt;-</span> <span class="st">"partialCredit"</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeRules</span>(CRItem) <span class="ot">&lt;-</span> <span class="st">"OffsetDisjunctive"</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeAlphas</span>(CRItem) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fl">1.2</span>,.<span class="dv">8</span>)</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeBetas</span>(CRItem) <span class="ot">&lt;-</span> <span class="fu">c</span>(.<span class="dv">25</span>, <span class="sc">-</span>.<span class="dv">25</span>)</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodePriorWeight</span>(CRItem) <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="do">## Used for learning</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="fu">BuildTable</span>(CRItem)</span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a><span class="fu">calcDPCFrame</span>(<span class="fu">ParentStates</span>(CRItem),<span class="fu">PnodeStates</span>(CRItem),</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeLnAlphas</span>(CRItem),<span class="fu">PnodeBetas</span>(CRItem),</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeRules</span>(CRItem),<span class="fu">PnodeLink</span>(CRItem))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2 FullCredit PartialCredit   NoCredit
1      H      H 0.90960164     0.0759038 0.01449456
2      M      H 0.90960164     0.0759038 0.01449456
3      L      H 0.90960164     0.0759038 0.01449456
4      H      M 0.75835519     0.1754952 0.06614958
5      M      M 0.49311841     0.2961154 0.21076617
6      L      M 0.49311841     0.2961154 0.21076617
7      H      L 0.75835519     0.1754952 0.06614958
8      M      L 0.19980267     0.3327296 0.46746769
9      L      L 0.05957531     0.2574386 0.68298611</code></pre>
</div>
</div>
</section>
<section id="offset-gadget" class="level2">
<h2 class="anchored" data-anchor-id="offset-gadget">Offset Gadget</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>CRItem <span class="ot">&lt;-</span> <span class="fu">OffsetGadget</span>(CRItem)</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>CRItem[]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://pluto.coe.fsu.edu/rdemos/Peanut/OffsetGadget.Rmd" class="uri">https://pluto.coe.fsu.edu/rdemos/Peanut/OffsetGadget.Rmd</a></p>
</section>
<section id="discrete-partial-credit-model-unleashed" class="level2">
<h2 class="anchored" data-anchor-id="discrete-partial-credit-model-unleashed">Discrete Partial Credit model unleashed</h2>
<ul>
<li><p><code>PnodeRules(pnode)</code> is now a <em>list</em></p>
<ul>
<li>different rule for each state</li>
</ul></li>
<li><p><code>PnodeLnAlphas(node)</code> is also a <em>list</em></p>
<ul>
<li><p>elements correspond to states</p></li>
<li><p>will be a vector or scalar according to corresponding rule.</p></li>
</ul></li>
<li><p><code>PnodeBetas(node)</code> is also a <em>list</em></p>
<ul>
<li><p>elements correspond to states</p></li>
<li><p>will be a vector or scalar according to corresponding rule.</p></li>
</ul></li>
</ul>
</section>
<section id="peanut-convention-lists-versus-vectors" class="level2">
<h2 class="anchored" data-anchor-id="peanut-convention-lists-versus-vectors">Peanut convention: Lists versus Vectors</h2>
<ul>
<li><p>A <em>list</em> corresponds to states of child variable (except last)</p>
<ul>
<li>If a vector or scalar shows up where a list is expected, the same value is used for all states.</li>
</ul></li>
<li><p>A <em>vector</em> (within a list) corresponds to parents</p></li>
<li><p>Could eliminate some parents (0 alpha, or infinite beta)</p>
<ul>
<li>Or use <em>inner</em> (node specific) <span class="math inline">\(Q\)</span>-matrix</li>
</ul></li>
</ul>
</section>
<section id="example-math-word-problem" class="level2">
<h2 class="anchored" data-anchor-id="example-math-word-problem">Example: Math Word Problem</h2>
<ul>
<li><p>Based on unpublished analysis by Cocke and Guo (personal communication 2011-07-11)</p></li>
<li><p>Next Generation Sunshine State Standards Benchmark, MA.6.A.5.1, “Use equivalent forms of fractions, decimals, and percents to solve problems” (NGSSS, 2013)</p></li>
<li><p>Sample problem:</p></li>
</ul>
<blockquote class="blockquote">
<p>John scored 75% on a test and Mary has 8 out of 12 correct on the same test. Each test item is worth the same amount of points. Who has the better score?</p>
</blockquote>
</section>
<section id="scoring-rubric" class="level2">
<h2 class="anchored" data-anchor-id="scoring-rubric">Scoring Rubric</h2>
<table class="table">
<thead>
<tr class="header">
<th>State</th>
<th>Description</th>
<th>Skills</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>No Credit</td>
<td>Null response</td>
<td>N/A</td>
</tr>
<tr class="even">
<td>———–</td>
<td>————————</td>
<td>——————</td>
</tr>
<tr class="odd">
<td>Partial</td>
<td>Recognizes 75% and</td>
<td>Mathematical</td>
</tr>
<tr class="even">
<td>Credit 1</td>
<td>8/12 as key elements</td>
<td>Language</td>
</tr>
<tr class="odd">
<td>———–</td>
<td>————————</td>
<td>——————</td>
</tr>
<tr class="even">
<td>Partial</td>
<td>Converts two fractions</td>
<td>Convert</td>
</tr>
<tr class="odd">
<td>Credit 2</td>
<td>to a common form</td>
<td>Fractions</td>
</tr>
<tr class="even">
<td>———–</td>
<td>————————</td>
<td>——————</td>
</tr>
<tr class="odd">
<td>Full</td>
<td>Makes the correct</td>
<td>Compare Fractions</td>
</tr>
<tr class="even">
<td>Credit</td>
<td>comparison</td>
<td>&amp; Math Lang.</td>
</tr>
<tr class="odd">
<td>———–</td>
<td>————————</td>
<td>——————</td>
</tr>
</tbody>
</table>
</section>
<section id="model-refinement" class="level2">
<h2 class="anchored" data-anchor-id="model-refinement">Model Refinement</h2>
<ul>
<li>Collapse “Partial Credit 2” and “Full Credit”
<ul>
<li>Few “Partial Credit 2”’s in practice</li>
</ul></li>
<li>Skill1 = Mathematical Language</li>
<li>Skill2 = Convert Fractions and Compare Fractions
<ul>
<li>Fraction Manipulation</li>
</ul></li>
<li>Need two combination rules
<ul>
<li>No Credit -&gt; Partial Credit. Only one skill relevant.
<ul>
<li>Can use any rule (“Compensatory” is default choice)</li>
</ul></li>
<li>Partial Credit -&gt; Full Credit.
<ul>
<li>Conjunctive model: both skills needed.</li>
<li>Less of Skill1 than of Skill2</li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="inner-q-matrix" class="level2">
<h2 class="anchored" data-anchor-id="inner-q-matrix">Inner Q-matrix</h2>
<ul>
<li>Q-matrix inside node:
<ul>
<li><p>Rows are state transitions</p></li>
<li><p>Columns are skills (parent variables)</p>
<table class="table">
<thead>
<tr class="header">
<th>Skill1</th>
<th>Skill2</th>
<th>Rule</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Partial</td>
<td>1</td>
<td>0</td>
<td>Compensatory</td>
</tr>
<tr class="even">
<td>———</td>
<td>——–</td>
<td>——–</td>
<td>————–</td>
</tr>
<tr class="odd">
<td>Full</td>
<td>1</td>
<td>1</td>
<td>Conjunctive</td>
</tr>
<tr class="even">
<td>———</td>
<td>——–</td>
<td>——–</td>
<td>————–</td>
</tr>
</tbody>
</table></li>
</ul></li>
<li>The function <code>PnodeQ(node)</code> allows setting the node level Q-matrix.</li>
<li><code>PnodeQ(node) = TRUE</code> implies all 1’s in Q-matrix.</li>
</ul>
</section>
<section id="complex-example" class="level2">
<h2 class="anchored" data-anchor-id="complex-example">Complex Example</h2>
<ul>
<li>Now use function <code>DPCGadget()</code> to edit with full model.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>CRItem <span class="ot">&lt;-</span> <span class="fu">Pnode</span>(CRItem) <span class="do">## Force into Pnode protocol.</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeLink</span>(CRItem) <span class="ot">&lt;-</span> <span class="st">"partialCredit"</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeRules</span>(CRItem) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">"Compensatory"</span>,<span class="st">"OffsetDisjunctive"</span>)</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeAlphas</span>(CRItem) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="at">Skill1=</span><span class="dv">1</span>),<span class="dv">1</span>)</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeBetas</span>(CRItem) <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="sc">-</span><span class="dv">1</span>,<span class="fu">c</span>(<span class="at">Skill1=</span><span class="sc">-</span><span class="dv">1</span>,<span class="at">Skill2=</span><span class="dv">1</span>))</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeQ</span>(CRItem) <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">as.logical</span>(<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>)),<span class="dv">2</span>,<span class="dv">2</span>,<span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodePriorWeight</span>(CRItem) <span class="ot">&lt;-</span> <span class="dv">10</span> <span class="do">## Used for learning</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a><span class="fu">calcDPCFrame</span>(<span class="fu">ParentStates</span>(CRItem),<span class="fu">PnodeStates</span>(CRItem),</span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeLnAlphas</span>(CRItem),<span class="fu">PnodeBetas</span>(CRItem),</span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">PnodeRules</span>(CRItem),<span class="fu">PnodeLink</span>(CRItem),<span class="at">Q=</span><span class="fu">PnodeQ</span>(CRItem))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Skill1 Skill2 FullCredit PartialCredit   NoCredit
1      H      H  0.9647686    0.03403099 0.00120040
2      M      H  0.8223300    0.15022614 0.02744384
3      L      H  0.3519553    0.33299278 0.31505193
4      H      M  0.9647686    0.03403099 0.00120040
5      M      M  0.8223300    0.15022614 0.02744384
6      L      M  0.3519553    0.33299278 0.31505193
7      H      L  0.9647686    0.03403099 0.00120040
8      M      L  0.8223300    0.15022614 0.02744384
9      L      L  0.3519553    0.33299278 0.31505193</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">BuildTable</span>(CRItem)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="the-dpcgadget" class="level2">
<h2 class="anchored" data-anchor-id="the-dpcgadget">The DPCGadget</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>CRItem <span class="ot">&lt;-</span> <span class="fu">DPCGadget</span>(CRItem)</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>CRItem[]</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="fu">PnodeQ</span>(CRItem)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://pluto.coe.fsu.edu/rdemos/Peanut/DPCGadget.Rmd" class="uri">https://pluto.coe.fsu.edu/rdemos/Peanut/DPCGadget.Rmd</a></p>
</section>
<section id="peanut-functions-summary" class="level2">
<h2 class="anchored" data-anchor-id="peanut-functions-summary">Peanut Functions Summary</h2>
<ul>
<li><code>Pnode()</code> – converts a Netica node into a Peanut node</li>
<li><code>PnodeStateValues(node) &lt;- effectiveThetas(PnodeNumStates(node))</code> – Sets up parent states.</li>
<li><code>PnodeLink(node)</code> – Link Function</li>
<li><code>PnodeRules(node)</code> – (list of) Combination Rules</li>
<li><code>PnodeLnAlphas(node)</code>, <code>PnodeAlphas(node)</code> – (list of) (vectors of) discriminations</li>
<li><code>PnodeBetas(node)</code> – (list of) (vectors of) difficulties</li>
<li><code>PnodeLinkScale(node)</code> – link scale parameter (for “normalLink”)</li>
<li><code>PnodeQ(node)</code> – Inner Q-matrix (TRUE = all 1’s)</li>
<li><code>PnodePriorWeight(node)</code> – prior strength for GEM algorithm learning</li>
<li><code>BuildTable(node)</code> – builds the table.</li>
</ul>
</section>
<section id="peanut-node-gadgets" class="level2">
<h2 class="anchored" data-anchor-id="peanut-node-gadgets">Peanut Node Gadgets</h2>
<ul>
<li>CompensatoryGadget – For simple Multiple-A models</li>
<li>OffsetGadget – For simple Multiple-B models</li>
<li>RegressionGadget – For normal link function models (no parent case)</li>
<li>DPCGadget – For complex models
<ul>
<li>inner Q-matrix</li>
<li>different rules per row</li>
</ul></li>
</ul>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>